<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Whisper's Garden</title>
    <link rel="stylesheet" href="../../secret-annex-snes.css" />
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="whispers-garden.css" />
  </head>
  <body class="secret-annex-snes">
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 21 · 1989 Arcade</p>
      <h1>Whisper's Garden</h1>
      <p class="subtitle">
        Wander the corn’s midnight aisles, following the voice that promises a diamond if you dare to listen.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Field Notes</h2>
        <p>
          The field is empty save for the whisper. Face the sound, walk toward it, and the night will lift a new piece of the
          ballpark out of the loam. Every discovery widens the glow and coaxes more specters out to play.
        </p>
        <ul class="callouts">
          <li><strong>Directional whisper:</strong> Rotate until the voice centers between your ears, then advance to chase its echo.</li>
          <li><strong>Focus &amp; moon:</strong> Holding focus sharpens the true whisper but pulls the moon faster toward dawn.</li>
          <li><strong>Ghost crew:</strong> Complete builds to reveal the waiting lineup beyond the outfield lights.</li>
        </ul>
        <section class="key-guide" aria-labelledby="controls-title">
          <h3 id="controls-title">Controls</h3>
          <dl>
            <div>
              <dt>Turn</dt>
              <dd><span class="key-label">A</span>/<span class="key-label">D</span> or <span class="key-label">←</span>/<span class="key-label">→</span></dd>
            </div>
            <div>
              <dt>Step</dt>
              <dd><span class="key-label">W</span>/<span class="key-label">S</span> or <span class="key-label">↑</span>/<span class="key-label">↓</span></dd>
            </div>
            <div>
              <dt>Focus</dt>
              <dd>Hold <span class="key-label">F</span> or press and hold the <em>Hold Focus</em> button.</dd>
            </div>
            <div>
              <dt>Reset</dt>
              <dd><span class="key-label">R</span> to reseed the whispers after a session.</dd>
            </div>
          </dl>
        </section>
      </section>
      <section class="simulator" aria-labelledby="simulator-title">
        <div class="simulator-header">
          <h2 id="simulator-title">Midnight Survey</h2>
          <div class="simulator-controls">
            <button type="button" class="action-button" id="begin-run">Begin Listening</button>
            <button type="button" class="action-button" id="reset-run">Reset Field</button>
          </div>
        </div>
        <p class="simulator-help">
          Follow the whispers to raise the field before the moon slips beyond the horizon. Focus only when you must—time races when
          the mind narrows.
        </p>
        <div class="hud" role="group" aria-label="Run status">
          <div class="hud-card">
            <h3>Field Completion</h3>
            <div class="meter" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" id="completion-meter">
              <div class="meter-fill" id="completion-fill" style="width: 0%"></div>
            </div>
            <p class="status-value"><span id="completion-value">0</span>% grown</p>
            <p class="status-note" id="completion-note">Build each station to reach 100%.</p>
          </div>
          <div class="hud-card">
            <h3>Moon Arc</h3>
            <div class="moon-gauge" aria-hidden="true">
              <div class="moon-face" id="moon-face"></div>
            </div>
            <p class="status-value"><span id="moon-value">Nightfall</span></p>
            <p class="status-note">Focus hastens the arc.</p>
          </div>
          <div class="hud-card">
            <h3>Focus</h3>
            <p class="status-value"><span id="focus-status">Idle</span></p>
            <p class="status-note">Hold <span class="key-label">F</span> or press below.</p>
            <button type="button" class="focus-button" id="focus-button" aria-pressed="false">Hold Focus</button>
          </div>
        </div>
        <div class="field-wrapper">
          <div class="field-view" id="field-view" aria-label="Cornfield listening space">
            <div class="field-overlay" aria-hidden="true"></div>
            <div class="player-marker" id="player-marker" aria-hidden="true"></div>
            <div class="whisper-beam" id="whisper-beam" aria-hidden="true"></div>
            <div class="ghost-lineup" aria-hidden="true">
              <span class="ghost ghost-left"></span>
              <span class="ghost ghost-center"></span>
              <span class="ghost ghost-right"></span>
            </div>
          </div>
        </div>
        <p class="status-line" id="status-line">Idle. Press Begin Listening when ready.</p>
        <section class="log-section" aria-labelledby="log-title">
          <div class="log-header">
            <h3 id="log-title">Whisper Log</h3>
            <p class="log-hint">Trust your ears; note the landmarks you awaken.</p>
          </div>
          <ul id="whisper-log"></ul>
        </section>
      </section>
      <section class="wrap-up" id="wrap-up" aria-labelledby="wrap-title" hidden>
        <h2 id="wrap-title">Run Complete</h2>
        <p id="wrap-subtitle">The field glows beneath the starlight.</p>
        <div class="wrap-summary">
          <div class="wrap-score">
            <p class="wrap-score-label">Final Completion</p>
            <p class="wrap-score-value" id="wrap-score-value">0%</p>
            <p class="wrap-score-note" id="wrap-score-note"></p>
          </div>
          <div class="wrap-map" id="wrap-map" role="img" aria-label="Top-down view of constructed field"></div>
        </div>
        <div class="wrap-actions">
          <button type="button" class="action-button" id="wrap-replay">Replay Night</button>
        </div>
      </section>
    </main>
    <footer class="page-footer">
      <p>Tip: The true whisper steadies when it sits in the center of your headphones.</p>
    </footer>
    <script type="module" src="whispers-garden.js"></script>
  </body>
</html>
