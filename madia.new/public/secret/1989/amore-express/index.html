<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Amore Express</title>
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="amore-express.css" />
  </head>
  <body>
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 48 · 1989 Arcade</p>
      <h1>Amore Express</h1>
      <p class="subtitle">
        Stage piping-hot pies from Amore Slices to the cul-de-sac clientele without tangling a single scooter trail.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Shift Briefing</h2>
        <p>
          Upscale regulars have queued an entire evening of "amore" pies. Streamed orders spill out of the shop and you must
          draft clean scooter routes that never cross. Every delivered pie locks in a glowing trail that future orders must
          respect.
        </p>
        <ul class="callouts">
          <li><strong>Order surge:</strong> Up to three mansions can call in at once, each demanding a direct trail before the timer drains.</li>
          <li><strong>Trail rules:</strong> Trails cannot overlap or reuse segments—any collision triggers a traffic jam that wipes the queue.</li>
          <li><strong>Bike Jump:</strong> One emergency charge lets you ghost through a single existing segment. Use it once, then it's gone.</li>
          <li><strong>Success:</strong> Keep the queue clear through every scheduled call to ace the shift.</li>
        </ul>
        <section class="routing-guide" aria-labelledby="routing-guide-title">
          <h3 id="routing-guide-title">Routing Steps</h3>
          <ol>
            <li>Select an order from the queue to spotlight the destination mansion.</li>
            <li>Start from the Amore Slices hub and click adjacent intersections to extend the trail.</li>
            <li>Reach the mansion before the timer expires to lock the delivery. Clear the path if you need a redo.</li>
          </ol>
        </section>
      </section>
      <section class="simulator" aria-labelledby="planner-title">
        <div class="simulator-header">
          <h2 id="planner-title">Delivery Planner</h2>
          <div class="simulator-controls">
            <button type="button" class="action-button" id="start-shift">Start Shift</button>
            <button type="button" class="action-button" id="end-shift" disabled>End Shift</button>
            <button type="button" class="action-button" id="clear-path" disabled>Clear Path</button>
          </div>
        </div>
        <p class="simulator-help">
          Select an active order, begin at the shop, and thread the scooter through open intersections. Paths may only move
          horizontally or vertically. Crossing an existing glow causes an immediate traffic jam.
        </p>
        <div class="harmony-panel" role="group" aria-label="Shift status">
          <div class="harmony-meter">
            <span class="meter-label">Queue Health</span>
            <div class="meter" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100" id="queue-meter">
              <div class="meter-fill" id="queue-meter-fill" style="width: 100%"></div>
            </div>
            <span class="meter-value" id="queue-meter-value">100</span>
          </div>
          <div class="status-readout" id="status-readout">Awaiting shift.</div>
        </div>
        <div class="simulator-layout">
          <div class="board-column" aria-label="Delivery grid" role="region">
            <div class="board" id="delivery-board" role="grid" aria-label="Cul-de-sac intersections"></div>
            <div class="legend" aria-hidden="true">
              <span class="legend-item legend-shop">Amore Slices</span>
              <span class="legend-item legend-mansion">Client Mansion</span>
              <span class="legend-item legend-trail">Locked Trail</span>
            </div>
          </div>
          <aside class="sidebar" aria-label="Orders and tools">
            <section class="order-queue" aria-labelledby="order-queue-title">
              <div class="sidebar-header">
                <h3 id="order-queue-title">Order Queue</h3>
                <span class="delivered-count" id="delivered-count">0 delivered</span>
              </div>
              <ul id="order-list"></ul>
            </section>
            <section class="jump-status" aria-labelledby="jump-status-title">
              <h3 id="jump-status-title">Bike Jump</h3>
              <p id="jump-status-text">Charge ready.</p>
            </section>
          </aside>
        </div>
        <section class="event-log" aria-labelledby="event-log-title">
          <h3 id="event-log-title">Dispatch Log</h3>
          <ul id="event-list"></ul>
        </section>
      </section>
    </main>
    <footer class="page-footer">
      <p>
        Tip: Plan exits early. Looping around the cul-de-sac is safer than squeezing past a glowing trail unless you're willing to burn the Bike Jump.
      </p>
    </footer>
    <script type="module" src="amore-express.js"></script>
  </body>
</html>
