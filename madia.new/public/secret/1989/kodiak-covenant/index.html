<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kodiak Covenant</title>
    <link rel="stylesheet" href="../../secret-annex-snes.css" />
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="kodiak-covenant.css" />
  </head>
  <body class="secret-annex-snes">
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 38 · 1989 Arcade</p>
      <h1>Kodiak Covenant</h1>
      <p class="subtitle">
        Thread the guardian and the orphan along the predator-prey paths before the hunter's sweep reaches their den.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Field Briefing</h2>
        <p>
          You are mapping the glacier runoffs of the Selkirk range. The orphaned cub can only pad across snow that the Kodiak has
          freshly broken trail on. The longer they drift apart, the faster the hunter's searchlight chews through the protection
          meter.
        </p>
        <ul class="callouts">
          <li><strong>Interdependent Pathing:</strong> The cub may only step on tiles the Kodiak visited within the last three beats.</li>
          <li><strong>Trap Clearing:</strong> Hunter traps marked with braids only fall once the Kodiak stomps through.</li>
          <li>
            <strong>Protection Meter:</strong> Stay within two tiles to keep the meter filled. Let it empty and the hunter will pounce the
            instant the cub is in reach.
          </li>
        </ul>
        <p>
          Scout a nine-turn route that walks both bears into the den. Use the planner to choreograph their simultaneous steps,
          then scrub the timeline to study how close calls with the hunter sweep spike or drain protection.
        </p>
      </section>
      <section class="simulator" aria-labelledby="simulator-title">
        <div class="simulator-header">
          <h2 id="simulator-title">Trail Planner</h2>
          <div class="simulator-controls">
            <button type="button" class="action-button" id="run-plan">Run Path</button>
            <button type="button" class="action-button" id="reset-plan">Reset</button>
            <button type="button" class="action-button" id="load-example">Load Example</button>
          </div>
        </div>
        <p class="simulator-help">
          Choose simultaneous moves for the Kodiak and the cub each beat. Kodiak moves first, clearing traps and renewing the
          scouted path; the cub follows on anything still warm in the last three steps. Keep an eye on the protection meter as you
          scrub through the hunter's sweep.
        </p>
        <section class="status-panel" aria-label="Run status">
          <div class="meter-block">
            <div class="meter-heading">
              <span class="meter-label">Protection</span>
              <span class="meter-delta" id="meter-delta"></span>
            </div>
            <div class="meter" role="progressbar" aria-valuemin="0" aria-valuemax="3" aria-valuenow="3" id="protection-meter">
              <div class="meter-fill" id="meter-fill" style="width: 100%"></div>
            </div>
            <span class="meter-value" id="meter-value">3 / 3</span>
          </div>
          <div class="status-readout" id="status-readout">Queue a path to begin.</div>
          <div class="hunter-readout" id="hunter-readout">Hunter sweep inactive.</div>
        </section>
        <section class="planner" aria-labelledby="planner-title">
          <h3 id="planner-title">Movement Grid</h3>
          <table class="planner-table">
            <thead>
              <tr>
                <th scope="col">Turn</th>
                <th scope="col">Kodiak</th>
                <th scope="col">Cub</th>
              </tr>
            </thead>
            <tbody id="planner-body"></tbody>
          </table>
        </section>
        <section class="trail-section" aria-labelledby="trail-title">
          <div class="trail-header">
            <h3 id="trail-title">Wilderness Overlay</h3>
            <div class="turn-controls">
              <button type="button" class="turn-button" id="prev-turn" aria-label="Previous turn">◀</button>
              <output id="turn-indicator" for="prev-turn next-turn">Turn 0 / 9</output>
              <button type="button" class="turn-button" id="next-turn" aria-label="Next turn">▶</button>
            </div>
          </div>
          <div class="legend" aria-label="Legend">
            <p><span class="legend-swatch legend-swatch--trail"></span> Trail</p>
            <p><span class="legend-swatch legend-swatch--trap"></span> Hunter trap</p>
            <p><span class="legend-swatch legend-swatch--den"></span> Den</p>
            <p><span class="legend-swatch legend-swatch--scouted"></span> Freshly scouted path</p>
          </div>
          <div class="trail-grid" id="trail-grid" role="presentation"></div>
        </section>
        <section class="event-log" aria-labelledby="event-log-title">
          <h3 id="event-log-title">Ridge Log</h3>
          <ol id="event-list"></ol>
        </section>
      </section>
    </main>
    <footer class="page-footer">
      <p>
        Tip: Let the Kodiak pause on the granite shelf before the trap run—double-backing a beat keeps the protection meter
        topped while the cub darts through the fresh snow.
      </p>
    </footer>
    <script type="module" src="kodiak-covenant.js"></script>
  </body>
</html>
