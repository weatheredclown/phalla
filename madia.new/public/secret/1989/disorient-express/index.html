<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Disorient Express</title>
    <link rel="stylesheet" href="../../secret-annex-snes.css" />
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="disorient-express.css" />
  </head>
  <body class="secret-annex-snes disorient-express">
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 22 · 1989 Arcade</p>
      <h1>The Disorient Express</h1>
      <p class="subtitle">
        One partner guides the route, the other tracks the echoes. Meet in the middle before the station wakes up.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Cabin Briefing</h2>
        <p>
          You are riding a midnight maintenance tram that only stops for teamwork. The Eyes trace the route through
          flickering lights and squeaky boards while the Ears stalk the ringing telephone using nothing but spatial audio.
          Sync your callouts, dodge every alert, and reach the phone before the conductor locks the carriage down.
        </p>
        <ul class="callouts">
          <li><strong>Split senses:</strong> The Eyes see the whole cabin map. The Ears stare into darkness but hear every cue.</li>
          <li>
            <strong>Risk your rush:</strong> Orders to <em>Rush</em> speed up each stride but muffle the world, making hazards much
            harder to parse.
          </li>
          <li>
            <strong>Miscommunications sting:</strong> Every squeak, clang, or mistimed shuffle adds a 10 second penalty to the
            shared timer.
          </li>
        </ul>
        <section class="controls" aria-labelledby="controls-title">
          <h3 id="controls-title">Controls</h3>
          <dl>
            <div>
              <dt>Start mission</dt>
              <dd>Press <button type="button" class="inline-button">Start Run</button>.</dd>
            </div>
            <div>
              <dt>Move</dt>
              <dd>
                Use the on-screen compass or press
                <span class="key-label">W</span>, <span class="key-label">A</span>, <span class="key-label">S</span>,
                <span class="key-label">D</span>.
              </dd>
            </div>
            <div>
              <dt>Toggle Rush</dt>
              <dd>Press <span class="key-label">R</span> or the <strong>Rush Orders</strong> button.</dd>
            </div>
            <div>
              <dt>Hold position</dt>
              <dd>Tap <span class="key-label">Space</span> to steady the team during audio-only threats.</dd>
            </div>
            <div>
              <dt>Restart</dt>
              <dd>After a run, hit <strong>Reset Carriage</strong> to clear penalties and start fresh.</dd>
            </div>
          </dl>
        </section>
      </section>
      <section class="mission" aria-labelledby="mission-title">
        <header class="mission-header">
          <h2 id="mission-title">Cooperative Run</h2>
          <div class="mission-controls">
            <button type="button" class="action-button" id="start-run">Start Run</button>
            <button type="button" class="action-button" id="reset-run">Reset Carriage</button>
          </div>
        </header>
        <div class="hud" aria-label="Run status">
          <div class="hud-card score-card">
            <p class="hud-label">Cooperation Time</p>
            <p class="score-value" id="cooperation-time">00:00.000</p>
            <p class="hud-sub">Miscommunications: <span id="miscommunication-count">0</span></p>
          </div>
          <div class="hud-card objective-card">
            <p class="hud-label">Objective</p>
            <p class="hud-sub">Guide the Ears to the ringing phone.</p>
            <p class="hud-sub">Phone Signal: <span id="signal-strength">Calibrating…</span></p>
          </div>
          <div class="hud-card rush-card">
            <p class="hud-label">Rush Orders</p>
            <p class="hud-sub">Status: <span id="rush-status">Standby</span></p>
            <button type="button" class="rush-button" id="rush-toggle" aria-pressed="false">Issue Rush Orders</button>
          </div>
          <div class="hud-card threat-card" aria-live="polite">
            <p class="hud-label">Audio Alerts</p>
            <p class="hud-sub" id="audio-alert">None</p>
          </div>
        </div>
        <div class="stage-grid">
          <section class="eyes-ops" aria-labelledby="eyes-title">
            <header class="panel-header">
              <h3 id="eyes-title">Eyes: Cabin Map</h3>
              <p>The Eyes call the route, spotting hazards marked in violet shimmer.</p>
            </header>
            <div class="map-grid" id="eyes-grid" role="grid" aria-label="Cabin layout"></div>
            <footer class="legend" aria-label="Legend">
              <p><span class="legend-swatch legend-start"></span> Team Start</p>
              <p><span class="legend-swatch legend-goal"></span> Ringing Phone</p>
              <p><span class="legend-swatch legend-hazard"></span> Noise Hazard</p>
              <p><span class="legend-swatch legend-route"></span> Safe Track</p>
            </footer>
          </section>
          <section class="ears-ops" aria-labelledby="ears-title">
            <header class="panel-header">
              <h3 id="ears-title">Ears: Audio Cabin</h3>
              <p>Blackout view. Wear headphones to track the phone pan and footsteps.</p>
            </header>
            <div class="ears-blackout" id="ears-blackout" role="presentation">
              <p class="ears-caption">Listening…</p>
              <p class="ears-caption" id="ears-feed" aria-live="assertive">Awaiting mission start.</p>
            </div>
            <div class="control-pad" aria-label="Movement controls">
              <button type="button" class="control-button" data-direction="up" aria-label="Move north">▲</button>
              <div class="control-middle">
                <button type="button" class="control-button" data-direction="left" aria-label="Move west">◀</button>
                <button type="button" class="control-button" data-direction="hold" aria-label="Hold position">■</button>
                <button type="button" class="control-button" data-direction="right" aria-label="Move east">▶</button>
              </div>
              <button type="button" class="control-button" data-direction="down" aria-label="Move south">▼</button>
            </div>
          </section>
        </div>
        <div class="status-bar" id="status-bar">Awaiting mission start.</div>
        <section class="log" aria-labelledby="log-title">
          <h3 id="log-title">Cabin Log</h3>
          <ul id="event-log"></ul>
        </section>
      </section>
    </main>
    <div class="summary-overlay" id="summary-overlay" hidden>
      <div class="summary-backdrop" id="summary-backdrop" aria-hidden="true"></div>
      <section class="summary-panel" role="dialog" aria-modal="true" aria-labelledby="summary-title">
        <header class="summary-header">
          <h2 id="summary-title">Mission Results</h2>
          <p id="summary-subtitle">Review your coordination before the next departure.</p>
        </header>
        <dl class="summary-stats">
          <div>
            <dt>Cooperation Time</dt>
            <dd id="summary-time">00:00.000</dd>
          </div>
          <div>
            <dt>Miscommunications</dt>
            <dd id="summary-miscommunications">0</dd>
          </div>
          <div>
            <dt>Rush Utilization</dt>
            <dd id="summary-rush">Standby</dd>
          </div>
        </dl>
        <footer class="summary-actions">
          <button type="button" class="action-button" id="summary-replay">Replay Mission</button>
          <button type="button" class="action-button" id="summary-close">Close</button>
        </footer>
      </section>
    </div>
    <script type="module" src="disorient-express.js"></script>
  </body>
</html>
