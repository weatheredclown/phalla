<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tailing the Trash</title>
    <link rel="stylesheet" href="../../secret-annex-snes.css" />
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="tailing-the-trash.css" />
  </head>
  <body class="secret-annex-snes">
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 23 · 1989 Arcade</p>
      <h1>Tailing the Trash</h1>
      <p class="subtitle">
        Shadow Detective Scott's lead through Dockside Eight while keeping Hooch's chaos out of sight.
        Clean fast, stay low, and bank the evidence before the suspicion needle spikes red.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Case File</h2>
        <p>
          The suspect runs the same loading dock loop every night, but tonight the DA needs a clean tail.
          Ride the shadows, sweep up Hooch's collateral, and document every handoff before the patrol doubles back.
        </p>
        <ul class="callouts">
          <li>
            <strong>Setup:</strong> Tap <span class="key-label">Start Stakeout</span> when you're ready.
            The suspect takes off, Hooch yanks the leash, and your evidence log starts at zero.
          </li>
          <li>
            <strong>Tailing:</strong> Use <span class="key-label">WASD</span>, the arrow keys,
            or the on-screen direction pad to slide between crates.
            Stay outside the flashing cone and keep within five tiles to bank checkpoints.
          </li>
          <li>
            <strong>Mess Patrol:</strong> Hooch leaves splatters and toppled cans.
            Sprint to the pulsing alert and press <span class="key-label">Space</span> or click it to mop up before the suspicion timer expires.
          </li>
          <li>
            <strong>Leash Control:</strong> Flip between <em>Short Leash</em> and <em>Long Leash</em>.
            Short keeps Hooch snug and tidy but slows your stride. Long lets you range faster yet invites heavy-hitting messes.
          </li>
          <li>
            <strong>Wrap-Up:</strong> Hit every evidence checkpoint without maxing the suspicion meter to cash out a stealth bonus and submit your high score.
          </li>
        </ul>
        <section class="key-guide" aria-labelledby="key-guide-title">
          <h3 id="key-guide-title">Controls</h3>
          <dl>
            <div>
              <dt>Move</dt>
              <dd><span class="key-label">WASD</span> / Arrow keys / On-screen pad</dd>
            </div>
            <div>
              <dt>Clean Mess</dt>
              <dd><span class="key-label">Space</span> or click the mess icon while standing on it</dd>
            </div>
            <div>
              <dt>Toggle Leash</dt>
              <dd>Press the <span class="key-label">Leash Toggle</span> button or <span class="key-label">L</span></dd>
            </div>
            <div>
              <dt>Abort Stakeout</dt>
              <dd><span class="key-label">Esc</span> to call it off and regroup</dd>
            </div>
          </dl>
        </section>
      </section>
      <section class="simulator" aria-labelledby="simulator-title">
        <div class="simulator-header">
          <h2 id="simulator-title">Dock Surveillance Console</h2>
          <div class="simulator-controls">
            <button type="button" class="action-button" id="start-button">Start Stakeout</button>
            <button type="button" class="action-button" id="toggle-leash" aria-pressed="false">Long Leash</button>
            <button type="button" class="action-button" id="abort-button">Abort Stakeout</button>
          </div>
        </div>
        <p class="simulator-help" id="simulator-help">
          Trail the suspect, keep Hooch's wake invisible, and log enough evidence before suspicion hits the ceiling.
          Long leash speeds your stride but spikes mess odds. Short leash crawls but keeps the dog disciplined.
        </p>
        <div class="status-board" role="group" aria-label="Surveillance status">
          <div class="status-tile">
            <span class="status-label">Evidence Logged</span>
            <span class="status-value" id="evidence-count">0</span>
          </div>
          <div class="status-tile">
            <span class="status-label">Suspicion</span>
            <div class="status-meter" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" id="suspicion-meter">
              <div class="status-meter-fill" id="suspicion-fill"></div>
            </div>
            <span class="status-value" id="suspicion-value">0%</span>
          </div>
          <div class="status-tile">
            <span class="status-label">Mess Alerts</span>
            <span class="status-value" id="mess-queue">0 active</span>
          </div>
          <div class="status-tile">
            <span class="status-label">Leash Mode</span>
            <span class="status-value" id="leash-mode">Short</span>
          </div>
        </div>
        <div class="grid-wrapper">
          <aside class="intel-panel" aria-label="Ops feed">
            <h3>Ops Feed</h3>
            <ul id="event-feed"></ul>
          </aside>
          <div class="grid-hud">
            <div class="vision-key" aria-hidden="true">
              <span class="vision-cell vision-warn"></span> Edge of vision
              <span class="vision-cell vision-hot"></span> Direct sightline
            </div>
            <div class="grid" id="city-grid" role="grid" aria-label="Dockside surveillance grid"></div>
            <div class="direction-pad" aria-hidden="true">
              <button type="button" class="pad-button" data-direction="up" aria-label="Move up">▲</button>
              <div class="pad-middle">
                <button type="button" class="pad-button" data-direction="left" aria-label="Move left">◄</button>
                <button type="button" class="pad-button" data-direction="down" aria-label="Move down">▼</button>
                <button type="button" class="pad-button" data-direction="right" aria-label="Move right">►</button>
              </div>
            </div>
          </div>
        </div>
        <p class="mission-status" id="mission-status">Hit Start Stakeout to begin shadowing the suspect.</p>
      </section>
    </main>
    <footer class="page-footer">
      <p>
        Hold the short leash when the cone tightens, then snap to long leash for the sprint between cover.
        Cleanups feed the stealth bonus—slow response or cone contact dumps suspicion fast.
      </p>
    </footer>
    <section class="wrapup" id="wrapup" hidden aria-live="polite">
      <div class="wrapup-dialog" role="dialog" aria-modal="true" aria-labelledby="wrapup-title" tabindex="-1">
        <header class="wrapup-header">
          <h2 id="wrapup-title">Stakeout Debrief</h2>
          <p id="wrapup-subtitle"></p>
        </header>
        <div class="wrapup-body">
          <div class="wrapup-summary">
            <p><strong>Evidence:</strong> <span id="wrapup-evidence">0</span></p>
            <p><strong>Suspicion Peak:</strong> <span id="wrapup-peak">0%</span></p>
            <p><strong>Stealth Bonus:</strong> <span id="wrapup-bonus">0</span></p>
          </div>
          <div class="wrapup-map">
            <h3>Route Trace</h3>
            <div class="map-grid" id="wrapup-map" role="img" aria-label="Stakeout route recap"></div>
            <p class="map-legend">
              <span class="legend-chip legend-detective">Detective Path</span>
              <span class="legend-chip legend-suspect">Suspect Route</span>
              <span class="legend-chip legend-mess">Mess Cleanups</span>
              <span class="legend-chip legend-alert">Suspicion Spikes</span>
            </p>
          </div>
        </div>
        <footer class="wrapup-footer">
          <button type="button" class="action-button" id="wrapup-rematch">Run It Back</button>
          <button type="button" class="action-button" id="wrapup-close">Exit Debrief</button>
        </footer>
      </div>
    </section>
    <script type="module" src="tailing-the-trash.js"></script>
  </body>
</html>
