<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Grail Trial</title>
    <link rel="stylesheet" href="../../secret-annex-snes.css" />
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="grail-trial.css" />
  </head>
  <body class="secret-annex-snes">
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 15 · 1989 Arcade</p>
      <h1>The Grail Trial</h1>
      <p class="subtitle">
        Beneath the monastery ruins, three sacred trials wait in the dark. Memorize the divine name, kneel before the blades,
        and test your nerve across an invisible bridge. Finish fast to prove your worthiness.
      </p>
    </header>
    <main id="main-content" class="page-layout grail-layout">
      <section class="score-hud" aria-label="Current expedition status">
        <div class="hud-tile hud-tile--score">
          <h2 class="hud-title">Worthiness Score</h2>
          <p class="hud-value hud-value--score" id="score-value">0</p>
        </div>
        <div class="hud-tile">
          <span class="hud-label">Total Time</span>
          <span class="hud-value" id="total-time">0.00s</span>
        </div>
        <div class="hud-tile">
          <span class="hud-label">Failures</span>
          <span class="hud-value" id="failure-count">0</span>
        </div>
        <div class="hud-tile hud-tile--high-score">
          <span class="hud-label">High Score</span>
          <span class="hud-value" data-high-score>—</span>
        </div>
        <div class="hud-tile">
          <span class="hud-label">Trials Cleared</span>
          <span class="hud-value" id="trials-cleared">0 / 3</span>
        </div>
      </section>
      <section class="trial-section" id="trial-1" aria-labelledby="trial1-title">
        <header class="trial-header">
          <h2 id="trial1-title">Trial I · The Breath of God</h2>
          <p>
            The dust reveals the name for just a heartbeat. Watch the letters flare, then step across in the sacred order without
            touching the false stones.
          </p>
        </header>
        <div class="trial-body">
          <div class="tile-grid" id="name-grid" role="grid" aria-label="Floor tiles of sacred letters"></div>
          <div class="trial-controls">
            <button type="button" class="action-button" id="trial1-start">Begin Chant</button>
            <button type="button" class="action-button action-button--ghost" id="trial1-skip" disabled>
              Skip Reveal
            </button>
          </div>
          <p class="trial-status" id="trial1-status">Press Begin Chant to watch the inscription ignite.</p>
        </div>
      </section>
      <section class="trial-section" id="trial-2" aria-labelledby="trial2-title" aria-live="polite">
        <header class="trial-header">
          <h2 id="trial2-title">Trial II · The Word of God</h2>
          <p>
            "Only the penitent man will pass." Kneel at the exact moment the blades cross to slide under the storm.
            Mistime it and the temple answers with steel.
          </p>
        </header>
        <div class="trial-body">
          <div class="blade-hall" id="blade-hall" aria-hidden="true">
            <div class="blade-track">
              <div class="blade"></div>
              <div class="blade blade--rear"></div>
            </div>
            <div class="kneeler" id="kneeler"></div>
          </div>
          <div class="trial-controls">
            <button type="button" class="action-button" id="trial2-start" disabled>Ready Blades</button>
            <button type="button" class="action-button action-button--danger" id="duck-button" disabled>Duck</button>
          </div>
          <p class="trial-status" id="trial2-status">Await the verdict from Trial I.</p>
        </div>
      </section>
      <section class="trial-section" id="trial-3" aria-labelledby="trial3-title">
        <header class="trial-header">
          <h2 id="trial3-title">Trial III · The Path of God</h2>
          <p>
            The bridge is invisible and the abyss is patient. Fling holy dust to glimpse the safe stones, then stride forward
            before they fade. Heavy throws reveal more ground but drain the satchel.
          </p>
        </header>
        <div class="trial-body">
          <div class="chasm" role="group" aria-label="Invisible bridge">
            <div class="chasm-track" id="chasm-track"></div>
            <div class="bridge-meter">
              <span class="meter-label">Dust Remaining</span>
              <span class="meter-value" id="dust-count">0</span>
            </div>
          </div>
          <div class="trial-controls">
            <button type="button" class="action-button action-button--ghost" id="light-toss" disabled>Light Toss</button>
            <button type="button" class="action-button" id="heavy-toss" disabled>Heavy Toss</button>
            <button type="button" class="action-button action-button--danger" id="advance-button" disabled>
              Step Forward
            </button>
          </div>
          <p class="trial-status" id="trial3-status">The bridge awaits the penitent.</p>
        </div>
      </section>
      <section class="legend" aria-label="Trial timing details">
        <h2 class="legend-title">Trial Clocks</h2>
        <div class="legend-grid">
          <article class="legend-card">
            <h3>Breath of God</h3>
            <p id="legend-trial1">0.00s · untouched</p>
          </article>
          <article class="legend-card">
            <h3>Word of God</h3>
            <p id="legend-trial2">0.00s · awaiting</p>
          </article>
          <article class="legend-card">
            <h3>Path of God</h3>
            <p id="legend-trial3">0.00s · awaiting</p>
          </article>
        </div>
      </section>
    </main>
    <section class="wrapup" id="wrapup" hidden>
      <div class="wrapup-backdrop" aria-hidden="true"></div>
      <article class="wrapup-dialog" role="dialog" aria-modal="true" aria-labelledby="wrapup-title" tabindex="-1">
        <header class="wrapup-header">
          <p class="wrapup-eyebrow">Trials Complete</p>
          <h2 id="wrapup-title">Final Worthiness</h2>
          <p class="wrapup-subtitle" id="wrapup-subtitle"></p>
        </header>
        <dl class="wrapup-metrics">
          <div>
            <dt>Breath of God</dt>
            <dd id="wrapup-trial1">0.00s</dd>
          </div>
          <div>
            <dt>Word of God</dt>
            <dd id="wrapup-trial2">0.00s</dd>
          </div>
          <div>
            <dt>Path of God</dt>
            <dd id="wrapup-trial3">0.00s</dd>
          </div>
          <div>
            <dt>Total Time</dt>
            <dd id="wrapup-total">0.00s</dd>
          </div>
          <div>
            <dt>Dust Reserved</dt>
            <dd id="wrapup-dust">0</dd>
          </div>
        </dl>
        <p class="wrapup-score" id="wrapup-score">Worthiness Score: 0</p>
        <div class="wrapup-actions">
          <button type="button" class="action-button" id="wrapup-replay">Attempt Again</button>
          <button type="button" class="action-button action-button--ghost" id="wrapup-close">Close</button>
        </div>
      </article>
    </section>
    <script type="module" src="./grail-trial.js"></script>
  </body>
</html>
