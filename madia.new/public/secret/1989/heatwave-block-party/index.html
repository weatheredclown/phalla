<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Heatwave Block Party</title>
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="heatwave-block-party.css" />
  </head>
  <body>
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 42 · 1989 Arcade</p>
      <h1>Heatwave Block Party</h1>
      <p class="subtitle">
        Ride out the heat wave by venting grievances, routing cooling fans, and timing the final trash can toss.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Neighborhood Briefing</h2>
        <p>
          Temperatures climb all day across Bedford-Stuy and frustrations keep stacking up. Keep the block calm by sweeping
          cooling air over building fronts before grievances ignite. Manage the Outburst meter so the trash can toss lands when
          you actually need it.
        </p>
        <ul class="callouts">
          <li>
            <strong>Temperature gauge:</strong> Climbs steadily and spikes with each unresolved grievance block. Cross the
            critical mark and the neighborhood boils over.
          </li>
          <li>
            <strong>Cooling fan routes:</strong> Enter <em>Route Mode</em> then click up to four connected tiles to sweep away
            grievances. Each cooled block drops the gauge and calms the street.
          </li>
          <li>
            <strong>Outburst meter:</strong> Waiting out jams or hitting barricades fills it. Once maxed, unleash the trash can
            toss to smash the heat—but the chaos locks board controls briefly.
          </li>
          <li><strong>Victory:</strong> Keep the temperature below the critical point until the day timer expires.</li>
        </ul>
        <section class="controls" aria-labelledby="controls-title">
          <h3 id="controls-title">Controls</h3>
          <dl>
            <div>
              <dt>Start day</dt>
              <dd>Press <strong>Start Day</strong> to kick off the timeline and heat cycles.</dd>
            </div>
            <div>
              <dt>Route cooling fan</dt>
              <dd>
                Press <strong>Route Fan</strong>, click connected tiles, then select <strong>Commit Route</strong> to clear
                grievances.
              </dd>
            </div>
            <div>
              <dt>Hold position</dt>
              <dd>Use <strong>Hold Position</strong> when you need to wait. It cools nothing but raises Outburst pressure.</dd>
            </div>
            <div>
              <dt>Trash can toss</dt>
              <dd>
                Available only with a full Outburst meter. Instantly drops temperature but locks the board for a few seconds.
              </dd>
            </div>
          </dl>
        </section>
      </section>
      <section class="arena" aria-labelledby="arena-title">
        <div class="arena-header">
          <h2 id="arena-title">Bedford-Stuy Streets</h2>
          <div class="arena-controls" role="group" aria-label="Action controls">
            <button type="button" class="action-button" id="start-day">Start Day</button>
            <button type="button" class="action-button" id="reset-day" disabled>Reset</button>
            <button type="button" class="action-button" id="hold-position" disabled>Hold Position</button>
            <button type="button" class="action-button" id="route-fan" disabled>Route Fan</button>
            <button type="button" class="action-button" id="commit-route" disabled>Commit Route</button>
            <button type="button" class="action-button" id="cancel-route" disabled>Cancel Route</button>
            <button type="button" class="action-button" id="trash-can-toss" disabled>Trash Can Toss</button>
          </div>
        </div>
        <div class="status-bar" id="status-bar" role="status" aria-live="polite">
          Press Start Day to begin the heat watch.
        </div>
        <div class="gauges">
          <section class="meter" aria-labelledby="temperature-label">
            <header class="meter-header">
              <h3 id="temperature-label">Temperature Gauge</h3>
              <span class="meter-reading" id="temperature-reading">0%</span>
            </header>
            <div class="meter-track" aria-hidden="true">
              <div class="meter-fill" id="temperature-fill"></div>
              <div class="meter-critical"></div>
            </div>
          </section>
          <section class="meter" aria-labelledby="outburst-label">
            <header class="meter-header">
              <h3 id="outburst-label">Outburst Meter</h3>
              <span class="meter-reading" id="outburst-reading">0%</span>
            </header>
            <div class="meter-track" aria-hidden="true">
              <div class="meter-fill meter-outburst" id="outburst-fill"></div>
            </div>
          </section>
          <section class="timer" aria-labelledby="timer-label">
            <h3 id="timer-label">Day Timer</h3>
            <p id="timer-remaining" class="timer-reading">01:30</p>
          </section>
        </div>
        <div class="lock-banner" id="lock-banner" hidden aria-live="assertive">
          Board locked—cooling fans grounded while tensions flare.
        </div>
        <div class="board" id="board" role="grid" aria-label="Cooling grid"></div>
        <section class="legend" aria-labelledby="legend-title">
          <h3 id="legend-title">Legend</h3>
          <ul>
            <li><span class="legend-swatch vent"></span> Rooftop vent (fan start)</li>
            <li><span class="legend-swatch trash"></span> Trash can release</li>
            <li><span class="legend-swatch hydrant"></span> Blocked hydrant</li>
            <li><span class="legend-swatch grievance"></span> Grievance block</li>
          </ul>
        </section>
        <section class="log" aria-labelledby="log-title">
          <h3 id="log-title">Street Log</h3>
          <ul id="log-entries"></ul>
        </section>
      </section>
    </main>
    <footer class="page-footer">
      <p>
        Tip: A controlled trash can toss buys breathing room, but the freeze on fan routes means grievances can pile up fast.
        Time it for a thick cluster, not a passing spark.
      </p>
    </footer>
    <script type="module" src="heatwave-block-party.js"></script>
  </body>
</html>
