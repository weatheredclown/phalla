<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nose for Trouble</title>
    <link rel="stylesheet" href="../../secret-annex-snes.css" />
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="nose-for-trouble.css" />
  </head>
  <body class="secret-annex-snes">
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 31 · 1989 Arcade</p>
      <h1>Nose for Trouble</h1>
      <p class="subtitle">
        Sweep the waterfront warehouse with Jerry Lee’s scent trail, tagging every illicit drop before the tunnels go
        boom.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Stage Notes</h2>
        <p>
          Captain Dooley cracked the courier ring, but the smugglers laced their maze with explosive tunnels. Jerry Lee can
          smell the next drug baggie a mile away—your job is to steer the scent trail through the grid without brushing a
          single detonator.
        </p>
        <ul class="callouts">
          <li>
            <strong>Drug baggies:</strong> Pop up anywhere the tunnels leave space. Reach one with the scent trail to secure
            the evidence and reveal the next drop.
          </li>
          <li>
            <strong>Explosive tunnels:</strong> Permanent hazards. Cross a tunnel with the trail and the whole pier block
            detonates.
          </li>
          <li>
            <strong>Frustration meter:</strong> Fills while a baggie is active. When maxed, Jerry surges forward on his own,
            tugging the trail into risky territory.
          </li>
          <li>
            <strong>Flow reroutes:</strong> Backtrack a single step with <span class="key-label">Backspace</span> or restart
            from the nose with the <span class="key-label">Reset Trail</span> button.
          </li>
        </ul>
        <section class="key-guide" aria-labelledby="key-guide-title">
          <h3 id="key-guide-title">Trail Commands</h3>
          <dl>
            <div>
              <dt>Draw Trail</dt>
              <dd>Click or drag from Jerry’s nose to adjacent tiles. Keep moving until you tag the baggie.</dd>
            </div>
            <div>
              <dt>Undo Step</dt>
              <dd><span class="key-label">Backspace</span> removes the latest tile while the patrol is active.</dd>
            </div>
            <div>
              <dt>Reset Trail</dt>
              <dd>Use the <span class="key-label">Reset Trail</span> button to jump back to the starting tile.</dd>
            </div>
            <div>
              <dt>Abort Patrol</dt>
              <dd><span class="key-label">Esc</span> or the <span class="key-label">Abort Mission</span> button.</dd>
            </div>
          </dl>
        </section>
      </section>
      <section class="simulator" aria-labelledby="simulator-title">
        <div class="simulator-header">
          <h2 id="simulator-title">Canine Control Console</h2>
          <div class="simulator-controls">
            <button type="button" class="action-button" id="start-patrol">Start Patrol</button>
            <button type="button" class="action-button" id="reset-trail">Reset Trail</button>
            <button type="button" class="action-button" id="abort-mission">Abort Mission</button>
          </div>
        </div>
        <p class="simulator-help">
          Keep the scent trail tight. Each baggie secured slows Jerry’s pulse, but hesitation fills the frustration meter and
          makes him lunge on instinct. One detonated tunnel ends the night.
        </p>
        <div class="status-board" role="group" aria-label="Patrol status">
          <div class="status-tile">
            <span class="status-label">Intercept Streak</span>
            <span class="status-value" id="streak-count">0</span>
          </div>
          <div class="status-tile">
            <span class="status-label">Explosions</span>
            <span class="status-value" id="explosion-count">0 / 1</span>
          </div>
          <div class="status-tile">
            <span class="status-label">Frustration</span>
            <div class="status-meter" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" id="frustration-bar">
              <div class="status-meter-fill" id="frustration-fill"></div>
            </div>
            <span class="status-value" id="frustration-value">0%</span>
          </div>
          <div class="status-tile">
            <span class="status-label">Response Time</span>
            <span class="status-value" id="response-time">0.0s</span>
          </div>
        </div>
        <div class="trail-wrapper">
          <div class="legend" aria-hidden="true">
            <span class="legend-item start">Jerry’s Nose</span>
            <span class="legend-item baggie">Drug Baggie</span>
            <span class="legend-item tunnel">Explosive Tunnel</span>
            <span class="legend-item trail">Scent Trail</span>
          </div>
          <div class="trail-grid" id="trail-grid" role="grid" aria-label="Warehouse grid"></div>
          <aside class="intel-panel" aria-label="Intel feed">
            <h3>Field Log</h3>
            <ul id="event-log"></ul>
          </aside>
        </div>
        <p class="mission-status" id="mission-status">Press Start Patrol to begin tracing the scent.</p>
      </section>
    </main>
    <footer class="page-footer">
      <p>
        Tip: Drop the trail in short bursts while Jerry calms down after a capture. If the frustration meter starts to glow,
        snag the next baggie fast before his instincts yank you toward the tunnels.
      </p>
    </footer>
    <script type="module" src="nose-for-trouble.js"></script>
  </body>
</html>
