<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Personal Ad Trap</title>
    <link rel="stylesheet" href="../../secret-annex-snes.css" />
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="personal-ad-trap.css" />
  </head>
  <body class="secret-annex-snes">
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 19 · 1989 Arcade</p>
      <h1>The Personal Ad Trap</h1>
      <p class="subtitle">
        Sift through the classifieds like a midnight detective. Pair clues with lonely hearts, cut the red strings, and nail the
        killer before the week is up.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Case File: Sea of Red</h2>
        <article class="victim-dossier" aria-labelledby="victim-heading">
          <h3 id="victim-heading">Victim Overview</h3>
          <dl>
            <div>
              <dt>Name</dt>
              <dd id="victim-name">—</dd>
            </div>
            <div>
              <dt>Incident Summary</dt>
              <dd id="victim-summary">Select a case to review the file.</dd>
            </div>
            <div>
              <dt>Time of Death</dt>
              <dd id="victim-timestamp">—</dd>
            </div>
            <div>
              <dt>Primary Evidence</dt>
              <dd id="victim-evidence">—</dd>
            </div>
          </dl>
        </article>
        <section class="stage-notes" aria-labelledby="stage-notes-title">
          <h3 id="stage-notes-title">Investigation Brief</h3>
          <p>
            Each case drops you into a fresh stack of personals. Cross-reference every clue in the file with the ads on the
            corkboard. Drag a clue token onto an ad—or select a clue then hit <span class="key-label">Link</span>—to lace them
            together with red string.
          </p>
          <ul class="callouts">
            <li>
              <strong>Investigation Time:</strong> You have seven days. Linking, flagging, or requesting background burns a day.
              Wrong accusations cost <em>three</em>.
            </li>
            <li>
              <strong>Risk &amp; reward:</strong> A confident accusation ends the case early for a huge score bonus. Miss, and the
              clock bleeds out fast.
            </li>
            <li>
              <strong>Wrap-up flowchart:</strong> Every link you make is captured in the debrief so you can study your logic trail
              before tackling the next file.
            </li>
          </ul>
          <p>
            Press <span class="key-label">R</span> to reset the current case at any time. It costs no days, but wipes your string.
          </p>
        </section>
      </section>
      <section class="simulator" aria-labelledby="simulator-title">
        <div class="simulator-header">
          <h2 id="simulator-title">Investigation Board</h2>
          <div class="simulator-controls">
            <button type="button" class="action-button" id="reset-case">Reset Case</button>
            <button type="button" class="action-button" id="make-accusation">Make an Accusation</button>
          </div>
        </div>
        <p class="simulator-help" id="status-readout">
          Review the case file, then start matching clues to personal ads. Each move costs a day.
        </p>
        <div class="status-board" role="group" aria-label="Investigation status">
          <div class="status-tile">
            <span class="status-label">Investigation Time</span>
            <div
              class="status-meter"
              id="time-meter"
              role="progressbar"
              aria-valuemin="0"
              aria-valuemax="7"
              aria-valuenow="7"
            >
              <div class="status-meter-fill" id="time-meter-fill"></div>
            </div>
            <span class="status-value" id="time-remaining">7 days left</span>
          </div>
          <div class="status-tile">
            <span class="status-label">Moves Used</span>
            <span class="status-value" id="move-count">0</span>
          </div>
          <div class="status-tile">
            <span class="status-label">Projected Score</span>
            <span class="status-value" id="score-value">0</span>
          </div>
          <div class="status-tile">
            <span class="status-label">Wrong Accusations</span>
            <span class="status-value" id="wrong-count">0</span>
          </div>
        </div>
        <div class="investigation-field" id="investigation-field">
          <svg class="string-layer" id="string-layer" aria-hidden="true"></svg>
          <div class="clue-column" aria-labelledby="clue-column-title">
            <h3 id="clue-column-title">Active Clues</h3>
            <p class="clue-instructions">
              Drag or tap to select a clue, then drop or link it to a personal ad. Red string marks a confirmed match.
            </p>
            <ul class="clue-list" id="clue-list"></ul>
          </div>
          <div class="corkboard" id="ad-board" aria-live="polite">
            <div class="board-surface">
              <div class="ads-grid" id="ad-grid" role="list"></div>
            </div>
          </div>
        </div>
        <aside class="intel-log" aria-labelledby="intel-log-title">
          <h3 id="intel-log-title">Investigation Log</h3>
          <ul id="event-log"></ul>
        </aside>
      </section>
    </main>
    <div class="case-closed-banner" id="case-closed-banner" aria-hidden="true">CASE CLOSED</div>
    <div class="wrong-flash" id="wrong-flash" aria-hidden="true">WRONG SUSPECT</div>
    <section class="accusation-panel" id="accusation-panel" aria-hidden="true" role="dialog" aria-labelledby="accusation-title">
      <div class="panel-surface">
        <h2 id="accusation-title">Make an Accusation</h2>
        <p>Select the ad you want to confront. A correct call ends the case. A miss costs three days.</p>
        <form id="accusation-form">
          <fieldset>
            <legend class="sr-only">Suspect list</legend>
            <div id="accusation-options" class="accusation-options"></div>
          </fieldset>
          <div class="panel-actions">
            <button type="button" class="action-button" id="cancel-accusation">Cancel</button>
            <button type="submit" class="action-button primary">Accuse</button>
          </div>
        </form>
      </div>
    </section>
    <section class="case-report" id="case-report" aria-hidden="true" role="dialog" aria-labelledby="report-title">
      <div class="report-surface">
        <h2 id="report-title">Case Debrief</h2>
        <p class="report-summary" id="report-summary"></p>
        <dl class="report-stats">
          <div>
            <dt>Final Score</dt>
            <dd id="report-score">0</dd>
          </div>
          <div>
            <dt>Days Remaining</dt>
            <dd id="report-days">0</dd>
          </div>
          <div>
            <dt>Moves Used</dt>
            <dd id="report-moves">0</dd>
          </div>
          <div>
            <dt>Wrong Accusations</dt>
            <dd id="report-wrongs">0</dd>
          </div>
        </dl>
        <section class="flowchart" aria-labelledby="flowchart-title">
          <h3 id="flowchart-title">Flowchart of Deductions</h3>
          <ol id="flowchart-list"></ol>
        </section>
        <div class="report-actions">
          <button type="button" class="action-button" id="replay-case">Replay Case</button>
          <button type="button" class="action-button primary" id="next-case">Next Case</button>
        </div>
      </div>
    </section>
    <script type="module" src="personal-ad-trap.js"></script>
  </body>
</html>
