<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Freddy's Dream Maze</title>
    <link rel="stylesheet" href="../../secret-annex-snes.css" />
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="freddys-dream-maze.css" />
  </head>
  <body class="secret-annex-snes freddys-dream-maze" data-fear-state="lucid">
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 5 · 1989 Arcade</p>
      <h1>Freddy's Dream Maze</h1>
      <p class="subtitle">
        The walls breathe, the floor tilts, and every whispered lullaby curdles into a threat.
        Map the nightmare, confront the phantoms that know your name, and race the claw before the dream seals shut.
      </p>
    </header>
    <main id="main-content" class="page-layout dream-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Lucidity Check</h2>
        <p>
          You wake in the bedroom you begged to leave a nightlight in—only the windows now open onto a hallway that never existed.
          Photographs weep rust, drawers breathe, and from beyond the door a boiler hum syncs with your pulse.
          You have minutes of clarity, a fading Sanity Meter, and just enough courage to bend the maze before Freddy finds your scent.
        </p>
        <ul class="callouts">
          <li>
            <strong>Shifting layout:</strong> Each choice rethreads the corridors.
            Familiar rooms can melt into phobias without warning, warping your Sanity Meter and your escape routes.
          </li>
          <li>
            <strong>Fear confrontations:</strong> When a manifestation seizes the room you can confront it in a sigil puzzle for a major sanity surge.
            Evading it drains you slowly while the maze grows meaner.
          </li>
          <li>
            <strong>Freddy strikes:</strong> His chase sequences slam the meter and scramble the HUD.
            Mash through the nightmare sprint before the claws finish the job.
          </li>
        </ul>
        <section class="controls" aria-labelledby="controls-title">
          <h3 id="controls-title">Controls</h3>
          <dl>
            <div>
              <dt>Advance choices</dt>
              <dd>Use the on-screen buttons or press <span class="key-label">1</span>, <span class="key-label">2</span>, <span class="key-label">3</span>.</dd>
            </div>
            <div>
              <dt>Confront fear glyphs</dt>
              <dd>Click the glyphs in the shown order or press <span class="key-label">Q</span>/<span class="key-label">W</span>/<span class="key-label">E</span>/<span class="key-label">R</span>/<span class="key-label">T</span>/<span class="key-label">Y</span> to match.</dd>
            </div>
            <div>
              <dt>Freddy chase</dt>
              <dd>Press the <span class="key-label">Space</span> bar or click the <em>Claw Free</em> button repeatedly to break the chase.</dd>
            </div>
            <div>
              <dt>Mute dream audio</dt>
              <dd>Toggle the <em>Mute Whispers</em> control in the simulator header.</dd>
            </div>
          </dl>
        </section>
      </section>
      <section class="simulator" aria-labelledby="simulator-title">
        <div class="simulator-header">
          <h2 id="simulator-title">Dream Maze Console</h2>
          <div class="simulator-controls">
            <button type="button" class="action-button" id="start-dream">Enter the Maze</button>
            <button type="button" class="action-button" id="reset-dream" disabled>Reset Dream</button>
            <button type="button" class="action-button" id="toggle-audio" aria-pressed="false">Mute Whispers</button>
          </div>
        </div>
        <p class="simulator-intro" id="simulator-status">
          The wallpaper is breathing. Anchor yourself, then choose your first corridor.
        </p>
        <div class="hud" aria-label="Dream status">
          <div class="hud-card hud-meter">
            <div class="meter-header">
              <span class="hud-label">Sanity</span>
              <span class="hud-value" id="sanity-value">100%</span>
            </div>
            <div
              class="meter"
              role="progressbar"
              aria-valuemin="0"
              aria-valuemax="100"
              aria-valuenow="100"
              id="sanity-meter"
            >
              <div class="meter-fill" id="sanity-fill"></div>
            </div>
          </div>
          <div class="hud-card">
            <span class="hud-label">Fear State</span>
            <span class="hud-value" id="fear-state">Lucid Drift</span>
            <span class="hud-note" id="fear-note">Walls still remember their shape.</span>
          </div>
          <div class="hud-card">
            <span class="hud-label">Sigils Secured</span>
            <span class="hud-value" id="sigil-count">0 / 4</span>
            <span class="hud-note">Unlock the wake door.</span>
          </div>
          <div class="hud-card">
            <span class="hud-label">Fears Confronted</span>
            <span class="hud-value" id="confront-count">0</span>
            <span class="hud-note" id="confront-note">Face phantoms for surges.</span>
          </div>
          <div class="hud-card">
            <span class="hud-label">Safe Zones Found</span>
            <span class="hud-value" id="safe-count">0</span>
            <span class="hud-note">Brief breaths of calm.</span>
          </div>
        </div>
        <article class="environment" aria-labelledby="environment-title">
          <header class="environment-header">
            <h3 id="environment-title">Familiar Bedroom (Wrong)</h3>
            <p id="environment-shift">The wallpaper peels backward, revealing a corridor of lockers that whisper lullabies.</p>
          </header>
          <div class="environment-visual" aria-hidden="true">
            <div class="environment-overlay" id="environment-overlay"></div>
            <div class="environment-grid" id="environment-grid"></div>
          </div>
          <p class="environment-detail" id="environment-detail">
            Every footstep echoes like dripping water. You feel the maze waiting to choose for you.
          </p>
        </article>
        <section class="decision" aria-labelledby="decision-title">
          <h3 id="decision-title">Choose Your Next Anchor</h3>
          <div class="decision-options" id="decision-options" role="group"></div>
        </section>
        <section class="dream-log" aria-labelledby="dream-log-title">
          <div class="dream-log-header">
            <h3 id="dream-log-title">Dream Telemetry</h3>
            <button type="button" class="action-button" id="clear-log">Clear Log</button>
          </div>
          <ol id="dream-log"></ol>
        </section>
      </section>
    </main>
    <aside class="wrapup" id="wrapup" hidden role="dialog" aria-modal="true" aria-labelledby="wrapup-title">
      <div class="wrapup-card">
        <h2 id="wrapup-title">Dream Exit Report</h2>
        <p class="wrapup-score"><span class="wrapup-score-value" id="wrapup-sanity">0%</span> sanity retained</p>
        <dl class="wrapup-stats">
          <div>
            <dt>Fears Confronted</dt>
            <dd id="wrapup-fears">0</dd>
          </div>
          <div>
            <dt>Safe Zones Reached</dt>
            <dd id="wrapup-safes">0</dd>
          </div>
          <div>
            <dt>Time Trapped</dt>
            <dd id="wrapup-time">0:00</dd>
          </div>
        </dl>
        <div class="wrapup-actions">
          <button type="button" class="action-button" id="wrapup-replay">Re-enter</button>
          <button type="button" class="action-button" id="wrapup-close">Close</button>
        </div>
      </div>
    </aside>
    <section class="manifestation" id="manifestation" hidden role="dialog" aria-modal="true" aria-labelledby="manifestation-title">
      <div class="manifestation-card">
        <h2 id="manifestation-title">Fear Manifestation</h2>
        <p class="manifestation-subtitle" id="manifestation-subtitle"></p>
        <p class="manifestation-description" id="manifestation-description"></p>
        <p class="manifestation-warning" id="manifestation-warning"></p>
        <div class="manifestation-choices">
          <button type="button" class="action-button" id="manifestation-confront">Confront</button>
          <button type="button" class="action-button" id="manifestation-evade">Evade</button>
        </div>
        <div class="confrontation" id="confrontation" hidden>
          <p id="confrontation-instructions">
            Memorize the sigil flash, then recreate it before the nightmare resets the room.
          </p>
          <div class="confrontation-sequence" id="confrontation-sequence" aria-live="polite"></div>
          <div class="confrontation-grid" id="confrontation-grid" role="group" aria-label="Sigil input"></div>
          <p class="confrontation-timer" id="confrontation-timer"></p>
        </div>
      </div>
    </section>
    <section class="chase" id="chase-overlay" hidden role="dialog" aria-modal="true" aria-labelledby="chase-title">
      <div class="chase-card">
        <h2 id="chase-title">Freddy Crashes In</h2>
        <p id="chase-description">
          The boiler roar spikes. Claws drag sparks along the walls while your Sanity Meter hemorrhages.
          Jam the button to rip free before he locks the loop.
        </p>
        <div class="chase-meter" role="img" aria-label="Freddy chase pressure">
          <div class="chase-fill" id="chase-fill"></div>
        </div>
        <p class="chase-note" id="chase-note">0 / 5 bursts</p>
        <button type="button" class="action-button" id="chase-resist">Claw Free</button>
      </div>
    </section>
    <script type="module" src="freddys-dream-maze.js"></script>
  </body>
</html>
