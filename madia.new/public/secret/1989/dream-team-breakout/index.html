<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dream Team Breakout</title>
    <link rel="stylesheet" href="dream-team-breakout.css" />
  </head>
  <body>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 49 · 1989 Arcade</p>
      <h1>Dream Team Breakout</h1>
      <p class="subtitle">
        Shepherd four escape artists with clashing quirks through Midtown without rattling their shared sanity meter.
      </p>
    </header>
    <main class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">City Desk Briefing</h2>
        <p>
          Four patients slipped the hospital shuttle and now have to thread Manhattan together. Queue their moves in advance, let
          the turn order resolve simultaneously, and land the squad on the highlighted stadium gates before the cops close the net.
        </p>
        <ul class="callouts">
          <li><strong>Stepper:</strong> Moves exactly one tile every turn. No hesitating, no double-steps.</li>
          <li><strong>Liner:</strong> Keeps walking straight until you make them hold position. A turn of calm lets them pivot.</li>
          <li><strong>Looper:</strong> Repeats the very first heading you assign forever. Choose wisely.</li>
          <li><strong>Wildcard:</strong> Already pocketed a cue list. Their pre-shuffled deck shows under Wildcard.</li>
        </ul>
        <p>
          Patrol cars beat the avenues in rhythm and a plainclothes tail mirrors whoever strays closest once they appear. Collide
          with authority, break a constraint, or run a red light and the shared sanity plummets. Snag the pep-talk pickup to steady
          nerves on the go.
        </p>
      </section>
      <section class="simulator" aria-labelledby="simulator-title">
        <div class="simulator-header">
          <h2 id="simulator-title">Breakout Simulator</h2>
          <div class="simulator-controls">
            <button type="button" class="action-button" id="run-plan">Run Plan</button>
            <button type="button" class="action-button" id="reset-plan">Reset</button>
            <button type="button" class="action-button" id="load-example">Load Example</button>
          </div>
        </div>
        <p class="simulator-help">
          Pick a heading for Stepper and Liner each beat. Looper locks to its first direction, and Wildcard's moves are fixed. Hit
          <em>Run Plan</em> to resolve six simultaneous turns, then scrub through the timeline to review the escape.
        </p>
        <section class="status-panel" aria-label="Squad status">
          <div class="sanity-gauge">
            <span class="meter-label">Sanity</span>
            <div class="meter" role="progressbar" aria-valuemin="0" aria-valuemax="3" aria-valuenow="3" id="sanity-meter">
              <div class="meter-fill" id="sanity-fill" style="width: 100%"></div>
            </div>
            <span class="meter-value" id="sanity-value">3 / 3</span>
          </div>
          <div class="status-readout" id="status-readout">Queue a plan to begin.</div>
        </section>
        <section class="planner" aria-labelledby="planner-title">
          <h3 id="planner-title">Movement Planner</h3>
          <div class="planner-grid">
            <div class="looper-config">
              <label for="looper-direction">Looper opening direction</label>
              <select id="looper-direction">
                <option value="E">East</option>
                <option value="N">North</option>
                <option value="S">South</option>
                <option value="W">West</option>
              </select>
            </div>
            <div class="wildcard-sequence" aria-live="polite">
              <p class="wildcard-label">Wildcard deck</p>
              <ol id="wildcard-sequence" class="direction-sequence"></ol>
            </div>
          </div>
          <table class="planner-table">
            <thead>
              <tr>
                <th scope="col">Turn</th>
                <th scope="col">Stepper</th>
                <th scope="col">Liner</th>
                <th scope="col">Looper</th>
                <th scope="col">Wildcard</th>
              </tr>
            </thead>
            <tbody id="planner-body"></tbody>
          </table>
        </section>
        <section class="city-section" aria-labelledby="city-title">
          <div class="city-header">
            <h3 id="city-title">Midtown Overlay</h3>
            <div class="turn-controls">
              <button type="button" class="turn-button" id="prev-turn" aria-label="Previous turn">◀</button>
              <output id="turn-indicator" for="prev-turn next-turn">Turn 0 / 6</output>
              <button type="button" class="turn-button" id="next-turn" aria-label="Next turn">▶</button>
            </div>
          </div>
          <div class="legend" aria-label="Legend">
            <p><span class="legend-swatch legend-swatch--goal"></span> Stadium gate</p>
            <p><span class="legend-swatch legend-swatch--pep"></span> Pep-talk pickup</p>
            <p><span class="legend-swatch legend-swatch--traffic"></span> Traffic light (green shows per turn)</p>
          </div>
          <div class="city-grid" id="city-grid" role="presentation"></div>
        </section>
        <section class="event-log" aria-labelledby="event-log-title">
          <h3 id="event-log-title">Dispatch Log</h3>
          <ol id="event-list"></ol>
        </section>
      </section>
    </main>
    <footer class="page-footer">
      <p>
        Tip: The crowd distraction on 3rd Street buys you a free sanity pip—thread Stepper through that pep-talk booth before the
        plainclothes tail mirrors Wildcard into your lane.
      </p>
    </footer>
    <script type="module" src="dream-team-breakout.js"></script>
  </body>
</html>
