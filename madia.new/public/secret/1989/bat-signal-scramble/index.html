<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Bat-Signal Scramble</title>
    <link rel="stylesheet" href="../../secret-annex-snes.css" />
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="bat-signal-scramble.css" />
  </head>
  <body class="secret-annex-snes">
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 15 · 1989 Arcade</p>
      <h1>The Bat-Signal Scramble</h1>
      <p class="subtitle">
        Rocket through Gotham's midnight avenues, vault onto the cathedral skyline, and hit the Bat-Signal before Commissioner
        Gordon's patience runs out.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Mission Brief</h2>
        <p>
          The scramble is a seamless two-part rush. <strong>Phase I</strong> tears through the Narrows in the Batmobile. Traffic
          choke points, armored barricades, and alleyway shortcuts demand quick lane shifts and gadget discipline. Nail perfect
          dodges and side-grapple turns to feed the <em>Momentum</em> meter. When it pops, the Turbine Dash slices whole blocks
          off the route.
        </p>
        <p>
          <strong>Phase II</strong> launches from the cathedral ramparts. Batman free-runs across gargoyle-lined roofs, timing
          jumps and grapnel swings between spotlight sweeps. Wider gaps hide risky shortcuts that can put you directly on the
          signal tower—but whiff the release and you'll tumble to the street with a brutal time penalty.
        </p>
        <ul class="callouts">
          <li>
            <strong>Primary clock:</strong> The response timer is the only score that matters. Collisions and falls tack on
            instant penalties. Shortcuts and boosts end the run faster.
          </li>
          <li>
            <strong>Risk lanes:</strong> Each phase surfaces dangerous shortcuts. They're highlighted in the HUD when available.
            Trigger them manually—automatic routing always takes the slower, safer path.
          </li>
          <li>
            <strong>Momentum combos:</strong> Chain a perfect dodge into a gadget turn or grapnel swing to rapidly charge
            Momentum. Spend a full meter on <span class="ability-label">Turbine Dash</span> (Phase I) or
            <span class="ability-label">Grapnel Launch</span> (Phase II) to slingshot ahead.
          </li>
          <li>
            <strong>Feedback:</strong> Impacts shake the cabinet, flash the HUD, and pump a metallic crash through the speakers.
            Grapnel swings blur the skyline to sell the speed.
          </li>
        </ul>
        <section class="controls" aria-labelledby="controls-title">
          <h3 id="controls-title">Controls</h3>
          <dl>
            <div>
              <dt>Shift lanes / paths</dt>
              <dd>
                Press <span class="key-label">←</span> / <span class="key-label">→</span> or use the lane buttons.
              </dd>
            </div>
            <div>
              <dt>Trigger shortcut</dt>
              <dd>Press <span class="key-label">S</span> or tap <strong>Risk Shortcut</strong> during the prompt.</dd>
            </div>
            <div>
              <dt>Side Grapple / Grapnel</dt>
              <dd>
                Press <span class="key-label">G</span> or use <strong>Gadget</strong> when the cue appears.
              </dd>
            </div>
            <div>
              <dt>Vault / Jump</dt>
              <dd>Press <span class="key-label">J</span> or hit <strong>Jump</strong> on rooftop prompts.</dd>
            </div>
            <div>
              <dt>Momentum boost</dt>
              <dd>Press <span class="key-label">B</span> or select <strong>Momentum Surge</strong> when the meter is full.</dd>
            </div>
            <div>
              <dt>Reset run</dt>
              <dd>Press <span class="key-label">R</span> or choose <strong>Reset Run</strong>.</dd>
            </div>
          </dl>
        </section>
      </section>
      <section class="scramble-console" aria-labelledby="console-title">
        <div class="console-header">
          <h2 id="console-title">Gotham City Response Drill</h2>
          <div class="console-actions">
            <button type="button" class="action-button" id="start-button">Start Run</button>
            <button type="button" class="action-button" id="reset-button">Reset Run</button>
          </div>
        </div>
        <div class="hud" role="group" aria-label="Run HUD">
          <div class="timer" id="response-timer" aria-live="polite">00:00.000</div>
          <div class="phase-tracker" role="list">
            <div class="phase-chip" data-phase="streets" role="listitem">
              <span class="phase-label">Phase I · Streets</span>
              <span class="phase-time" data-phase-time="streets">--:--.---</span>
            </div>
            <div class="phase-chip" data-phase="rooftops" role="listitem">
              <span class="phase-label">Phase II · Rooftops</span>
              <span class="phase-time" data-phase-time="rooftops">--:--.---</span>
            </div>
          </div>
          <div class="momentum-meter" role="group" aria-label="Momentum meter">
            <span class="momentum-label">Momentum</span>
            <div
              class="momentum-track"
              role="progressbar"
              aria-valuemin="0"
              aria-valuemax="100"
              aria-valuenow="0"
              id="momentum-meter"
            >
              <div class="momentum-fill" id="momentum-fill"></div>
            </div>
            <span class="momentum-value" id="momentum-value">0%</span>
            <button type="button" class="action-button" id="momentum-button" aria-pressed="false">Momentum Surge</button>
          </div>
        </div>
        <div class="game-stage" id="game-stage" aria-live="polite">
          <div class="stage-backdrop" aria-hidden="true"></div>
          <div class="batmobile" id="batmobile" role="img" aria-label="Batmobile racing toward the Bat-Signal"></div>
          <div class="batman" id="batman" role="img" aria-label="Batman sprinting across rooftops"></div>
          <div class="signal-beam" aria-hidden="true"></div>
        </div>
        <div class="control-bar" role="group" aria-label="Direct controls">
          <div class="lane-controls" role="group" aria-label="Lane controls">
            <button type="button" class="action-button" data-direction="left" aria-label="Shift left">◀</button>
            <button type="button" class="action-button" data-direction="right" aria-label="Shift right">▶</button>
          </div>
          <button type="button" class="action-button" id="shortcut-button">Risk Shortcut</button>
          <button type="button" class="action-button" id="gadget-button">Gadget</button>
          <button type="button" class="action-button" id="jump-button">Jump</button>
        </div>
        <div class="status-bar" id="status-bar" role="status" aria-live="assertive">Awaiting ignition.</div>
        <section class="event-feed" aria-labelledby="event-feed-title">
          <h3 id="event-feed-title">Run Telemetry</h3>
          <ul id="event-log"></ul>
        </section>
      </section>
    </main>
    <footer class="page-footer">
      <p>
        Tip: Thread the Narrows barricade with a last-second lane shift, hook the side grapple immediately, then trigger Turbine
        Dash. You'll rocket straight into the cathedral launch pad with Momentum to spare.
      </p>
    </footer>
    <section class="wrap-up" id="wrap-up" role="dialog" aria-modal="true" aria-labelledby="wrap-up-title" hidden>
      <div class="wrap-up-card">
        <h2 id="wrap-up-title">Scramble Complete</h2>
        <p class="wrap-up-time">Final Time: <span id="final-time">00:00.000</span></p>
        <p class="wrap-up-delta" id="final-delta" aria-live="polite"></p>
        <dl class="split-list">
          <div>
            <dt>Phase I · Streets</dt>
            <dd id="split-streets">--:--.---</dd>
          </div>
          <div>
            <dt>Phase II · Rooftops</dt>
            <dd id="split-rooftops">--:--.---</dd>
          </div>
        </dl>
        <section class="route-map" aria-labelledby="route-map-title">
          <h3 id="route-map-title">Route Debrief</h3>
          <p id="route-summary"></p>
          <ul id="route-map"></ul>
        </section>
        <div class="wrap-up-actions">
          <button type="button" class="action-button" id="replay-button">Run It Back</button>
          <button type="button" class="action-button" id="close-wrap-up">Close</button>
        </div>
      </div>
    </section>
    <script type="module" src="bat-signal-scramble.js"></script>
  </body>
</html>
