<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lawnmower Labyrinth</title>
    <link rel="stylesheet" href="../../secret-annex-snes.css" />
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="lawnmower-labyrinth.css" />
  </head>
  <body class="secret-annex-snes">
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 1 · 1989 Arcade</p>
      <h1>Lawnmower Labyrinth</h1>
      <p class="subtitle">
        Shrunk to ant scale, you must weave through towering grass and sprinkler storms while a deafening mower sweeps the lawn
        in lethal passes. Reach the patio flag before the blades do.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Backyard Survival Briefing</h2>
        <p>
          The mower is already roaring. Its route zigzags across the backyard, leaving only brief windows to sprint between
          cover. Tall grass hides you, open turf exposes you, and the sprinkler zone pulses with crushing droplets that drench
          the path at set intervals. Study the cadence, then choose when to crawl and when to dash.
        </p>
        <ul class="callouts">
          <li>
            <strong>Proximity Alert:</strong> A HUD gauge pulses from green to red as the mower closes in. If it reaches you while
            you are exposed, the run ends instantly.
          </li>
          <li>
            <strong>Cover vs. Speed:</strong> Moving through tall grass keeps you concealed but slow. Triggering a mad dash covers
            twice the distance but leaves you winded for a beat—plan dashes only when the mower&rsquo;s pass is clear.
          </li>
          <li>
            <strong>Sprinkler Zone:</strong> Massive droplets bombard the final stretch. Watch the sprinkler timer and slip through
            during its dry beat or you&rsquo;ll be knocked flat.
          </li>
          <li>
            <strong>Bonus Crumbs:</strong> Risky cookie crumbs glitter in the open. Snagging them increases your score multiplier,
            but you must brave the mower&rsquo;s line of sight to reach them.
          </li>
        </ul>
        <p>
          Reach the Safe Zone flag as fast as possible. Your best survival time locks into the 1989 leaderboard, with crumb
          pickups adding a sweet kicker. A failed run slams to black with a final slice, so listen for the engine, trust the
          proximity meter, and keep moving.
        </p>
      </section>
      <section class="cabinet" aria-labelledby="cabinet-title">
        <div class="cabinet-header">
          <h2 id="cabinet-title">Backyard Navigation Console</h2>
          <div class="cabinet-controls">
            <button type="button" class="action-button" id="start-run">Start Run</button>
            <button type="button" class="action-button" id="reset-run">Reset</button>
          </div>
        </div>
        <p class="cabinet-help">
          Use the directional controls or arrow keys to move. Tap <strong>Mad Dash</strong> to bolt two tiles at once (short
          cooldown). Hide in tall grass to break line of sight, and pause on <strong>Hold Position</strong> to let the mower pass
          safely.
        </p>
        <section class="hud" aria-label="Run status">
          <div class="hud-block">
            <h3>Survival Time</h3>
            <p class="hud-value" id="survival-time">00.00s</p>
          </div>
          <div class="hud-block">
            <h3>Proximity Alert</h3>
            <div class="proximity-meter" aria-hidden="true">
              <div class="proximity-fill" id="proximity-fill"></div>
            </div>
            <p class="hud-note" id="proximity-note">Mower idle</p>
          </div>
          <div class="hud-block">
            <h3>Sprinkler Cycle</h3>
            <p class="hud-value" id="sprinkler-timer">Dry window</p>
          </div>
          <div class="hud-block">
            <h3>Crumbs Collected</h3>
            <p class="hud-value" id="crumb-count">0</p>
          </div>
        </section>
        <div class="board-wrapper">
          <div
            class="board"
            id="game-board"
            role="grid"
            aria-label="Backyard grid"
            aria-describedby="board-legend"
          ></div>
          <aside class="legend" id="board-legend">
            <h3>Legend</h3>
            <ul>
              <li><span class="legend-swatch is-player"></span> Player</li>
              <li><span class="legend-swatch is-cover"></span> Tall grass cover</li>
              <li><span class="legend-swatch is-open"></span> Fresh-cut lawn</li>
              <li><span class="legend-swatch is-object"></span> Yard obstacle</li>
              <li><span class="legend-swatch is-sprinkler"></span> Sprinkler zone</li>
              <li><span class="legend-swatch is-crumb"></span> Bonus crumb</li>
              <li><span class="legend-swatch is-safe"></span> Safe Zone flag</li>
              <li><span class="legend-swatch is-mower"></span> Mower sweep</li>
            </ul>
          </aside>
        </div>
        <section class="control-panel" aria-label="Movement controls">
          <div class="directional">
            <button type="button" class="control-button" data-move="up" aria-label="Move up">▲</button>
            <button type="button" class="control-button" data-move="left" aria-label="Move left">◀</button>
            <button type="button" class="control-button" data-move="right" aria-label="Move right">▶</button>
            <button type="button" class="control-button" data-move="down" aria-label="Move down">▼</button>
          </div>
          <div class="support-controls">
            <button type="button" class="action-button" id="dash-button">Mad Dash</button>
            <button type="button" class="action-button" id="wait-button">Hold Position</button>
          </div>
        </section>
        <section class="session-status" aria-live="polite" id="session-status">
          Engine rumble on standby. Start the run to engage the mower.
        </section>
        <section class="log-panel" aria-labelledby="log-title">
          <div class="log-header">
            <h3 id="log-title">Field Log</h3>
            <button type="button" class="action-button" id="clear-log">Clear Log</button>
          </div>
          <ol class="log-entries" id="event-log"></ol>
        </section>
      </section>
    </main>
    <footer class="page-footer">
      <p>Stay low, count the passes, and sprint only when the mower line clears. The leaderboard waits for your clean escape.</p>
    </footer>
    <section
      class="wrap-up"
      id="wrap-up"
      hidden
      aria-labelledby="wrap-up-title"
      role="dialog"
      aria-modal="true"
    >
      <div class="wrap-up-card">
        <h2 id="wrap-up-title">Run Summary</h2>
        <p class="wrap-up-text" id="wrap-up-text"></p>
        <p class="wrap-up-note">Replay to chase a faster time and log a better survival score.</p>
        <div class="wrap-up-actions">
          <button type="button" class="action-button" id="replay-button">Run Again</button>
          <button type="button" class="action-button" id="wrap-up-close">Close</button>
        </div>
      </div>
    </section>
    <script type="module" src="lawnmower-labyrinth.js"></script>
  </body>
</html>
