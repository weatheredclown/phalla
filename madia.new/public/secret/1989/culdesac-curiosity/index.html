<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cul-de-sac Curiosity</title>
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="culdesac-curiosity.css" />
  </head>
  <body>
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 35 · 1989 Arcade</p>
      <h1>Cul-de-sac Curiosity</h1>
      <p class="subtitle">
        Neighborly swaps fuel digging expeditions beneath the Klopek house. Gossip too hard and your paranoia boils over.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Neighborhood Briefing</h2>
        <p>
          The block is convinced something terrible is buried under 669 Hickory. Keep the suburban grapevine churning with match
          combos, bank dig tokens, then descend into the basement dig site to pry out what the Klopeks have hidden. Every action
          makes the cul-de-sac more anxious—if paranoia erupts into an outburst, the operation collapses.
        </p>
        <ul class="callouts">
          <li>
            <strong>Suburban grid:</strong> Swap adjacent tiles to align three or more matching neighbors. Cleared tiles add dig
            tokens and drop fresh rumors into play.
          </li>
          <li>
            <strong>Dig site:</strong> Spend tokens to break bones blocking progress and crack open mystery boxes. Fill the
            curiosity meter before paranoia tops out.
          </li>
          <li>
            <strong>Paranoia meter:</strong> Rises slowly over time and faster with hasty moves. Let it max and you trigger a
            public outburst—mission failed.
          </li>
          <li>
            <strong>Snooping actuation:</strong> Peek at upcoming basement placements to plan smarter digs, but expect the nerves
            to spike when you do.
          </li>
        </ul>
        <section class="controls" aria-labelledby="controls-title">
          <h3 id="controls-title">Controls</h3>
          <dl>
            <div>
              <dt>Select rumor tile</dt>
              <dd>Click a tile, then an orthogonally adjacent neighbor to attempt a swap.</dd>
            </div>
            <div>
              <dt>Dig basement tile</dt>
              <dd>
                Click a revealed dig site tile to spend the shown cost. Bones consume three tokens, dirt costs one, and mystery
                boxes need two.
              </dd>
            </div>
            <div>
              <dt>Snoop ahead</dt>
              <dd>
                Press <strong>Snoop Basement</strong> to reveal the next wave of bones and boxes for a few beats at the cost of
                extra paranoia.
              </dd>
            </div>
            <div>
              <dt>Reset investigation</dt>
              <dd>Use <strong>Reset</strong> to restart the level if the block spirals into panic.</dd>
            </div>
          </dl>
        </section>
      </section>
      <section class="arena" aria-labelledby="arena-title">
        <div class="arena-header">
          <h2 id="arena-title">Hickory Street Watch</h2>
          <div class="arena-controls" role="group" aria-label="Action controls">
            <button type="button" class="action-button" id="snoop-button">Snoop Basement</button>
            <button type="button" class="action-button" id="reset-button">Reset</button>
          </div>
        </div>
        <div class="status-bar" id="status-bar" role="status" aria-live="polite">
          Swap tiles to gather gossip and earn dig tokens.
        </div>
        <section class="gauges" aria-label="Meters">
          <div class="meter" aria-labelledby="paranoia-label">
            <header class="meter-header">
              <h3 id="paranoia-label">Paranoia</h3>
              <span class="meter-reading" id="paranoia-reading">0%</span>
            </header>
            <div class="meter-track" aria-hidden="true">
              <div class="meter-fill meter-paranoia" id="paranoia-fill"></div>
            </div>
          </div>
          <div class="meter" aria-labelledby="tokens-label">
            <header class="meter-header">
              <h3 id="tokens-label">Dig Tokens</h3>
              <span class="meter-reading" id="token-reading">0</span>
            </header>
            <div class="meter-track meter-tokens" aria-hidden="true">
              <div class="meter-fill" id="token-fill"></div>
            </div>
          </div>
          <div class="meter" aria-labelledby="curiosity-label">
            <header class="meter-header">
              <h3 id="curiosity-label">Curiosity Meter</h3>
              <span class="meter-reading" id="curiosity-reading">0 / 3</span>
            </header>
            <div class="meter-track meter-curiosity" aria-hidden="true">
              <div class="meter-fill meter-curiosity" id="curiosity-fill"></div>
            </div>
          </div>
        </section>
        <div class="boards">
          <section class="gossip-board" aria-labelledby="gossip-title">
            <h3 id="gossip-title">Suburban Grid</h3>
            <p class="board-caption">Matches earn dig tokens. Failed swaps still spook the block.</p>
            <div class="board-grid" id="gossip-grid" role="grid" aria-label="Gossip grid"></div>
          </section>
          <section class="dig-site" aria-labelledby="dig-title">
            <h3 id="dig-title">Klopek Basement Dig Site</h3>
            <p class="board-caption">
              Spend dig tokens to clear tiles. Bones are blockers, mystery boxes fuel the curiosity meter.
            </p>
            <div class="dig-grid" id="dig-grid" role="grid" aria-label="Dig site"></div>
            <div class="dig-legend">
              <span class="legend-item bone">Bone · 3 tokens</span>
              <span class="legend-item mystery">Mystery Box · 2 tokens</span>
              <span class="legend-item dirt">Dirt · 1 token</span>
            </div>
          </section>
        </div>
        <section class="log" aria-labelledby="log-title">
          <h3 id="log-title">Neighborhood Log</h3>
          <ul id="log-entries"></ul>
        </section>
      </section>
    </main>
    <footer class="page-footer">
      <p>
        Tip: The neighbors spook fast. Let gossip cascade to stockpile tokens before breaking into deep layers, and only snoop
        when a bone wall is about to surface.
      </p>
    </footer>
    <div class="snoop-overlay" id="snoop-overlay" hidden role="dialog" aria-modal="true" aria-labelledby="snoop-title">
      <div class="snoop-frame">
        <h2 id="snoop-title">Upcoming Basement Finds</h2>
        <p>Next placements after the current layer clears:</p>
        <ul id="snoop-list"></ul>
        <button type="button" class="action-button" id="close-snoop">Close Preview</button>
      </div>
    </div>
    <div class="failure-overlay" id="failure-overlay" hidden role="alertdialog" aria-modal="true">
      <div class="failure-frame">
        <h2>Outburst!</h2>
        <p>The cul-de-sac erupts and the Klopeks slam their doors. Reset to try again.</p>
        <button type="button" class="action-button" id="failure-reset">Reset Investigation</button>
      </div>
    </div>
    <script type="module" src="culdesac-curiosity.js"></script>
  </body>
</html>
