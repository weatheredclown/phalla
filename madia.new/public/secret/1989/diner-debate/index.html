<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Diner Debate</title>
    <link rel="stylesheet" href="../../secret-annex-snes.css" />
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="diner-debate.css" />
  </head>
  <body class="secret-annex-snes diner-debate">
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 24 · 1989 Arcade</p>
      <h1>The Diner Debate</h1>
      <p class="subtitle">
        Nail the comedic crescendo with laser-precise timing, outshine the gawking crowd, and choose the perfect
        moment to unleash your finale.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Stage Notes</h2>
        <p>
          New Yorkers love a scene, but this booth showdown is yours to command. Each debate beat drops into the lane below—
          time your inputs as the cue crosses the marker, keep the combo alive, and decide when the climax should roll.
        </p>
        <ul class="callouts">
          <li>
            <strong>Comedic cadence:</strong> Hit each prompt when the beat line slices through the icon. Tight timing earns
            <span class="rating perfect">Perfect</span> ratings and pours on the conviction.
          </li>
          <li>
            <strong>Escalating distractions:</strong> Later rounds crank up the kitchen clatter and camera flashes. Stay focused
            and watch for hold cues and rapid-fire triples.
          </li>
          <li>
            <strong>Climax meter:</strong> Fill it with consecutive hits, then decide when to fire the finale. Launch it early for
            a safe bump or max it out for a high-pressure score surge.
          </li>
          <li>
            <strong>Performance wrap:</strong> Flawless runs shower the diner in neon confetti and stamp a leaderboard-ready
            Conviction Score.
          </li>
        </ul>
        <section class="key-guide" aria-labelledby="key-guide-title">
          <h3 id="key-guide-title">Input Legend</h3>
          <dl class="legend-list">
            <div>
              <dt><span class="key-label">J</span> · Gasp</dt>
              <dd>Sharp intake with a mock scandalized shoulder shake.</dd>
            </div>
            <div>
              <dt><span class="key-label">K</span> · Pound Table</dt>
              <dd>Smack the Formica for emphasis. Hold when the icon stretches.</dd>
            </div>
            <div>
              <dt><span class="key-label">L</span> · Nod</dt>
              <dd>A knowing, confident nod to sell the verdict.</dd>
            </div>
            <div>
              <dt><span class="key-label">Space</span> · Activate Climax</dt>
              <dd>
                Trigger the high-voltage finale once the meter is ready. The lane pulses to confirm the window is open.
              </dd>
            </div>
          </dl>
        </section>
      </section>
      <section class="stage" aria-labelledby="stage-title">
        <header class="stage-header">
          <div>
            <h2 id="stage-title">Performance Console</h2>
            <p class="stage-subtitle" id="stage-status">Select a sequence to rehearse.</p>
          </div>
          <div class="stage-actions">
            <button type="button" class="action-button" id="start-sequence">Begin Sequence</button>
            <button type="button" class="action-button" id="next-sequence" disabled>Next Round</button>
            <button type="button" class="action-button" id="reset-sequence">Reset Session</button>
          </div>
        </header>
        <div class="performance-shell" role="group" aria-label="Performance metrics">
          <div class="score-tile">
            <span class="score-label">Conviction Score</span>
            <span class="score-value" id="conviction-score">0</span>
          </div>
          <div class="score-tile">
            <span class="score-label">Combo</span>
            <span class="score-value" id="combo-count">0</span>
            <span class="score-note" id="combo-best">Best 0</span>
          </div>
          <div class="score-tile">
            <span class="score-label">Accuracy</span>
            <span class="score-value" id="accuracy-value">0%</span>
            <span class="score-note" id="hit-readout">0 / 0</span>
          </div>
          <div class="score-tile climax">
            <div class="climax-meter" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" id="climax-meter">
              <div class="climax-fill" id="climax-fill"></div>
            </div>
            <div class="climax-caption">
              <span class="score-label">Climax Meter</span>
              <button type="button" class="climax-button" id="climax-trigger" disabled>
                Hold for Applause
              </button>
            </div>
          </div>
        </div>
        <div class="diner-floor" id="diner-floor">
          <div class="crowd" aria-hidden="true">
            <div class="patron patron-left"></div>
            <div class="patron patron-right"></div>
            <div class="camera-flash" id="camera-flash" aria-hidden="true"></div>
          </div>
          <div class="lead-performer" id="lead-performer" role="img" aria-label="Lead performer delivering the debate"></div>
        </div>
        <div class="timeline-shell" aria-label="Timing lane">
          <div class="timeline" id="timeline">
            <div class="timeline-background" aria-hidden="true"></div>
            <div class="hit-marker" aria-hidden="true"></div>
          </div>
          <div class="timeline-legend">
            <span class="legend-item gasp">Gasp</span>
            <span class="legend-item pound">Pound</span>
            <span class="legend-item nod">Nod</span>
            <span class="legend-item hold">Hold</span>
          </div>
        </div>
        <div class="log-panel" aria-live="polite" aria-atomic="false">
          <h3>Event Log</h3>
          <ul id="event-log"></ul>
        </div>
      </section>
    </main>
    <aside class="wrapup" id="wrapup" hidden>
      <h2>Performance Wrap</h2>
      <p class="wrapup-text" id="wrapup-summary"></p>
      <dl class="wrapup-stats">
        <div>
          <dt>Conviction Score</dt>
          <dd id="wrapup-score">0</dd>
        </div>
        <div>
          <dt>Accuracy</dt>
          <dd id="wrapup-accuracy">0%</dd>
        </div>
        <div>
          <dt>Highest Combo</dt>
          <dd id="wrapup-combo">0</dd>
        </div>
      </dl>
      <button type="button" class="action-button" id="wrapup-close">Replay the Debate</button>
    </aside>
    <div class="flash-banner" id="flash-banner" role="status" aria-live="assertive" hidden>
      <p id="flash-text"></p>
    </div>
    <script type="module" src="diner-debate.js"></script>
  </body>
</html>
