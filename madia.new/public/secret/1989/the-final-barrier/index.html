<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Final Barrier</title>
    <link rel="stylesheet" href="../../secret-annex-snes.css" />
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="the-final-barrier.css" />
  </head>
  <body class="secret-annex-snes">
    <a class="skip-link" href="#main-content">Skip to game</a>
    <div class="scanlines" aria-hidden="true"></div>
    <header class="page-header">
      <p class="eyebrow">Level 14 · 1989 Arcade</p>
      <h1>The Final Barrier</h1>
      <p class="subtitle">
        Punch through the Great Barrier's neon maelstrom, balance shield routing against weapon surges, and keep the Enterprise
        intact long enough to face the godlike sentinel at the center.
      </p>
    </header>
    <main id="main-content" class="page-layout">
      <section class="briefing" aria-labelledby="briefing-title">
        <h2 id="briefing-title">Mission Briefing</h2>
        <p>
          Starfleet command has greenlit a one-way sortie. The Enterprise is locked to auto-pilot—your sole duty is tactical
          diversion and weapons release. The barrier's energies manifest as hostile forms and debris; precision fire is rewarded
          with Exploration Score multipliers while sloppy shots fracture the hull.
        </p>
        <ul class="callouts">
          <li>
            <strong>Phase 1 · Outer Edge:</strong> Glide through slow-moving plasma pockets and ice asteroids. Establish your
            combo and bank torpedoes for later.
          </li>
          <li>
            <strong>Phase 2 · Energy Storm:</strong> Visual distortions and erratic targets hammer the view. Expect shield drain
            spikes—shifting to <em>Shields to Full</em> can keep you alive, but your phaser cadence will suffer.
          </li>
          <li>
            <strong>Phase 3 · The Center:</strong> A towering sentience emerges. Torpedo windows are brief; only concentrated
            phaser volleys in <em>Weapons to Full</em> will break its lattice before it obliterates your shields.
          </li>
        </ul>
        <section class="key-guide" aria-labelledby="command-title">
          <h3 id="command-title">Command Deck</h3>
          <dl>
            <div>
              <dt>Fire Phasers</dt>
              <dd>Click or tap the viewport to fire. Phaser rate shifts with your power diversion mode.</dd>
            </div>
            <div>
              <dt>Photon Torpedo</dt>
              <dd>Press <span class="key-label">T</span> or use the control panel button. Limited stock &mdash; make it count.</dd>
            </div>
            <div>
              <dt>Power Diversion</dt>
              <dd>
                Toggle between Balanced, Shields to Full, and Weapons to Full at any time. Shields regenerate automatically when
                power is routed their way.
              </dd>
            </div>
          </dl>
        </section>
        <section class="combo-guide" aria-labelledby="intel-title">
          <h3 id="intel-title">Tactical Intel</h3>
          <p>
            Every accurate shot grows the Exploration Score multiplier. Maintain 75% accuracy or better to bank heavy rewards.
            Shields collapse at zero; the wrap-up log records your score, accuracy, and remaining integrity for the captain's
            chair.
          </p>
        </section>
      </section>
      <section class="mission" aria-labelledby="mission-title">
        <div class="mission-header">
          <div>
            <h2 id="mission-title">Barrier Penetration Simulator</h2>
            <p class="phase-indicator" id="phase-indicator">Awaiting launch clearance.</p>
          </div>
          <div class="mode-toggle" role="radiogroup" aria-label="Power diversion">
            <button type="button" class="mode-button is-active" data-mode="balanced" aria-pressed="true">Balanced</button>
            <button type="button" class="mode-button" data-mode="shields">Shields to Full</button>
            <button type="button" class="mode-button" data-mode="weapons">Weapons to Full</button>
          </div>
        </div>
        <div class="mission-shell">
          <div class="cockpit-frame" id="cockpit">
            <canvas id="barrier-canvas" width="960" height="540" aria-label="Enterprise forward viewscreen"></canvas>
            <div class="hud">
              <div class="hud-row">
                <div class="hud-item">
                  <span class="hud-label">Exploration Score</span>
                  <span class="hud-value" id="score-value">0</span>
                </div>
                <div class="hud-item">
                  <span class="hud-label">Accuracy</span>
                  <span class="hud-value" id="accuracy-value">100%</span>
                </div>
                <div class="hud-item">
                  <span class="hud-label">Combo</span>
                  <span class="hud-value" id="combo-value">×1.0</span>
                </div>
              </div>
              <div class="hud-row hud-row-secondary">
                <div class="hud-item">
                  <span class="hud-label">Shields</span>
                  <span class="hud-value" id="shields-value">100%</span>
                </div>
                <div class="hud-item">
                  <span class="hud-label">Photon Torpedoes</span>
                  <span class="hud-value" id="torpedo-value">3</span>
                </div>
                <div class="hud-item">
                  <span class="hud-label">Power Mode</span>
                  <span class="hud-value" id="mode-value">Balanced</span>
                </div>
              </div>
            </div>
            <div class="cinematic" id="cinematic" role="dialog" aria-live="polite" aria-label="Approach cinematic" hidden>
              <div class="cinematic-body">
                <p class="cinematic-line" data-step="1">Enterprise on final approach. Barrier density spiking.</p>
                <p class="cinematic-line" data-step="2">Helm locked. Tactical, the view is yours.</p>
                <p class="cinematic-line" data-step="3">Awaiting order to breach the Final Barrier.</p>
                <button type="button" class="action-button" id="cinematic-launch">Engage</button>
              </div>
            </div>
          </div>
          <div class="particle-anchor" id="particle-anchor" aria-hidden="true"></div>
        </div>
        <div class="mission-controls">
          <button type="button" class="action-button" id="launch-button">Launch Sequence</button>
          <button type="button" class="action-button" id="phaser-button">Fire Phasers</button>
          <button type="button" class="action-button" id="torpedo-button">Photon Torpedo</button>
          <button type="button" class="action-button" id="reset-button">Reset Simulation</button>
        </div>
        <div class="status-area">
          <div class="status-display" id="status-display">Power routed to standby systems.</div>
          <ul class="event-log" id="event-log" aria-live="polite"></ul>
        </div>
        <section class="wrap-up" id="wrap-up" hidden aria-labelledby="wrap-title" role="status">
          <div class="wrap-card">
            <h3 id="wrap-title">Mission Debrief</h3>
            <p class="wrap-summary" id="wrap-summary">Outcome pending.</p>
            <dl class="wrap-stats">
              <div>
                <dt>Exploration Score</dt>
                <dd id="wrap-score">0</dd>
              </div>
              <div>
                <dt>Weapon Accuracy</dt>
                <dd id="wrap-accuracy">0%</dd>
              </div>
              <div>
                <dt>Shield Integrity</dt>
                <dd id="wrap-shields">0%</dd>
              </div>
            </dl>
            <div class="wrap-actions">
              <button type="button" class="action-button" id="replay-button">Run Again</button>
              <button type="button" class="action-button" id="close-wrap-button">Close</button>
            </div>
          </div>
        </section>
      </section>
    </main>
    <footer class="page-footer">
      <p>
        Tip: Swap to Weapons to Full when the entity lattice opens. Two torpedoes and a maxed combo will vaporize its core before
        the next energy surge.
      </p>
    </footer>
    <script type="module" src="the-final-barrier.js"></script>
  </body>
</html>
