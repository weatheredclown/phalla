<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Hopline Diagnostics</title>
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="./hopline-diagnostics.css" />
  </head>
  <body>
    <header>
      <div class="header-bar">
        <div class="header-text">
          <p>Layer 08 Â· Backbone Pulse</p>
          <h1>Hopline Diagnostics</h1>
        </div>
        <button
          type="button"
          class="fullscreen-toggle"
          data-role="fullscreen-toggle"
          data-fullscreen="false"
          aria-pressed="false"
        >
          <span class="fullscreen-toggle__label fullscreen-toggle__label--enter" data-state="enter">Enter full screen</span>
          <span class="fullscreen-toggle__label fullscreen-toggle__label--exit" data-state="exit">Exit full screen</span>
        </button>
      </div>
      <p>
        A campus office says uploads are timing out. You already ran ping and traceroute from the NOC.
        Match each network to the router that should advertise it so the packets stay on-net.
      </p>
    </header>
    <main>
      <section class="diagnostic" aria-labelledby="diag-heading">
        <h2 id="diag-heading">Trace brief</h2>
        <div class="log-panel" role="log" aria-live="polite">
          <pre>
$ ping -c 4 studio.lan
Reply from 10.20.3.12: time=9 ms
Reply from 10.20.3.12: time=9 ms
Request timed out.
Request timed out.

$ traceroute studio.lan
 1  gateway (10.0.0.1)
 2  edge-hub (10.1.4.1)
 3  ???
 4  metro-border (198.51.100.9)
 5  * * *
          </pre>
        </div>
      </section>
      <section class="control-panel" aria-labelledby="route-heading">
        <h2 id="route-heading">Route remap console</h2>
        <p>Select the router that should announce each prefix.</p>
        <form id="route-form" class="form-grid">
          <fieldset>
            <legend>Prefix to router mapping</legend>
            <div class="route-grid">
              <label>
                10.20.0.0/16 data lab
                <select name="lab">
                  <option value="">--</option>
                  <option value="edge-hub">edge-hub</option>
                  <option value="metro-border">metro-border</option>
                  <option value="studio-loop">studio-loop</option>
                </select>
              </label>
              <label>
                172.22.40.0/21 studio wing
                <select name="studio">
                  <option value="">--</option>
                  <option value="edge-hub">edge-hub</option>
                  <option value="metro-border">metro-border</option>
                  <option value="studio-loop">studio-loop</option>
                </select>
              </label>
              <label>
                198.51.100.0/28 ISP handoff
                <select name="isp">
                  <option value="">--</option>
                  <option value="edge-hub">edge-hub</option>
                  <option value="metro-border">metro-border</option>
                  <option value="studio-loop">studio-loop</option>
                </select>
              </label>
            </div>
          </fieldset>
          <button type="submit" class="execute-button">Deploy routes</button>
        </form>
        <div class="topology-map" aria-hidden="true">
          <div class="router-grid">
            <div class="router-card" data-router="edge-hub">
              <span class="router-name">edge-hub</span>
              <span class="router-light"></span>
            </div>
            <div class="router-card" data-router="studio-loop">
              <span class="router-name">studio-loop</span>
              <span class="router-light"></span>
            </div>
            <div class="router-card" data-router="metro-border">
              <span class="router-name">metro-border</span>
              <span class="router-light"></span>
            </div>
          </div>
          <div class="prefix-layer">
            <div class="prefix-chip" data-prefix="lab">10.20.0.0/16</div>
            <div class="prefix-chip" data-prefix="studio">172.22.40.0/21</div>
            <div class="prefix-chip" data-prefix="isp">198.51.100.0/28</div>
          </div>
        </div>
        <div id="status-board" class="status-board" aria-live="polite">Routing daemon idle.</div>
      </section>
    </main>
    <footer>Keep the traceroute green and the pager silent.</footer>
    <script type="module" src="./hopline-diagnostics.js"></script>
  </body>
</html>
