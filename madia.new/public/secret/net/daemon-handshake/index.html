<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Daemon Handshake</title>
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="./daemon-handshake.css" />
  </head>
  <body>
    <header>
      <p>Layer 06 · Web Stack</p>
      <h1>Daemon Handshake</h1>
      <p>
        You're on-call for the student newspaper. Apache won't stay up, the server certificate is expiring, and traffic spikes at
        dawn. Configure the daemon exactly as the ops checklist demands.
      </p>
    </header>
    <main>
      <section class="control-panel" aria-labelledby="httpd-brief">
        <h2 id="httpd-brief">Ops checklist</h2>
        <p>Ensure the following before you fire up <code>httpd</code>:</p>
        <ul class="task-list">
          <li>Listen on port <strong>8080</strong> while the proxy is in front.</li>
          <li>Use <code>/var/www/altroot</code> as the document root.</li>
          <li>Enable both <strong>mod_ssl</strong> and <strong>mod_status</strong>. Do not enable <strong>mod_userdir</strong>.</li>
        </ul>
        <form id="daemon-form" class="form-grid">
          <label>
            Listen Port
            <input type="number" name="port" min="1" max="65535" value="80" />
          </label>
          <label>
            Document Root
            <input type="text" name="docroot" placeholder="/var/www/html" />
          </label>
          <fieldset>
            <legend>Modules</legend>
            <div class="checkbox-grid">
              <label>
                mod_ssl
                <input type="checkbox" name="modules" value="mod_ssl" />
              </label>
              <label>
                mod_status
                <input type="checkbox" name="modules" value="mod_status" />
              </label>
              <label>
                mod_userdir
                <input type="checkbox" name="modules" value="mod_userdir" />
              </label>
              <label>
                mod_rewrite
                <input type="checkbox" name="modules" value="mod_rewrite" />
              </label>
            </div>
          </fieldset>
          <button type="submit" class="execute-button">Start daemon</button>
        </form>
        <div class="status-board" id="status-board" aria-live="polite">Daemon halted. Awaiting config…</div>
        <div class="rack-visual" aria-hidden="true">
          <div class="light" data-light="port">
            <span class="light-label">Port 8080</span>
            <span class="light-glow"></span>
          </div>
          <div class="light" data-light="docroot">
            <span class="light-label">/var/www/altroot</span>
            <span class="light-glow"></span>
          </div>
          <div class="light" data-light="ssl">
            <span class="light-label">mod_ssl</span>
            <span class="light-glow"></span>
          </div>
          <div class="light" data-light="status">
            <span class="light-label">mod_status</span>
            <span class="light-glow"></span>
          </div>
          <div class="light" data-light="userdir">
            <span class="light-label">mod_userdir (off)</span>
            <span class="light-glow"></span>
          </div>
          <div class="rack-rail"></div>
        </div>
        <div class="handshake-oscilloscope" aria-hidden="true">
          <div class="scope-header">
            <span class="scope-label">Checklist sync</span>
            <span class="scope-readout" id="handshake-readout">0/5</span>
          </div>
          <div class="scope-wave">
            <span class="scope-pulse"></span>
            <span class="scope-pulse"></span>
            <span class="scope-pulse"></span>
            <span class="scope-pulse"></span>
            <span class="scope-pulse"></span>
          </div>
        </div>
      </section>
    </main>
    <footer>Keep alive ping courtesy of the campus NOC.</footer>
    <script type="module" src="./daemon-handshake.js"></script>
  </body>
</html>
