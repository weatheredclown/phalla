<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kernel Forge 2.0</title>
    <link rel="stylesheet" href="../common.css" />
    <link rel="stylesheet" href="../widgets.css" />
    <link rel="stylesheet" href="./kernel-forge-20.css" />
  </head>
  <body>
    <header>
      <div class="header-bar">
        <div class="header-text">
          <p>Layer 05 · Kernel Lab</p>
          <h1>Kernel Forge 2.0</h1>
        </div>
        <button
          type="button"
          class="fullscreen-toggle"
          data-role="fullscreen-toggle"
          data-fullscreen="false"
          aria-pressed="false"
        >
          <span class="fullscreen-toggle__label fullscreen-toggle__label--enter" data-state="enter">Enter full screen</span>
          <span class="fullscreen-toggle__label fullscreen-toggle__label--exit" data-state="exit">Exit full screen</span>
        </button>
      </div>
      <p>
        The colo is rolling out dual-homed routers. Your kernel must be lean, route packets fast, and boot without SCSI baggage.
        Toggle features to match the deployment memo.
      </p>
    </header>
    <main>
      <section class="control-panel" aria-labelledby="kernel-brief">
        <h2 id="kernel-brief">Build directives</h2>
        <p>Target kernel: 2.0.36 with SMP patch.</p>
        <ul class="task-list">
          <li>Enable <strong>IP forwarding</strong> and <strong>IP firewall</strong> support.</li>
          <li>Compile <strong>3c59x</strong> NIC driver <em>into</em> the kernel.</li>
          <li>Exclude <strong>SCSI</strong> and <strong>Sound</strong> subsystems to shrink the image.</li>
        </ul>
        <form id="kernel-form" class="form-grid">
          <fieldset>
            <legend>Networking</legend>
            <div class="checkbox-grid">
              <label>
                IP forwarding
                <input type="checkbox" name="network" value="forwarding" />
              </label>
              <label>
                IP firewalling
                <input type="checkbox" name="network" value="firewall" />
              </label>
              <label>
                Experimental IPv6
                <input type="checkbox" name="network" value="ipv6" />
              </label>
            </div>
          </fieldset>
          <fieldset>
            <legend>Device Drivers</legend>
            <div class="driver-mode">
              <p class="control-label" id="nic-mode-label">3c59x driver</p>
              <div
                class="segment-toggle"
                data-widget="segment-toggle"
                data-value="module"
                aria-labelledby="nic-mode-label"
              >
                <input type="hidden" name="nic-mode" value="module" />
                <div class="segment-toggle__options">
                  <button class="segment-toggle__option" data-value="module" type="button">
                    <span class="segment-toggle__label">Build as module</span>
                  </button>
                  <button class="segment-toggle__option" data-value="builtin" type="button">
                    <span class="segment-toggle__label">Compile into kernel</span>
                  </button>
                </div>
              </div>
            </div>
            <div class="checkbox-grid">
              <label>
                Include SCSI support
                <input type="checkbox" name="drivers" value="scsi" />
              </label>
              <label>
                Include Sound subsystem
                <input type="checkbox" name="drivers" value="sound" />
              </label>
              <label>
                Include PCMCIA
                <input type="checkbox" name="drivers" value="pcmcia" />
              </label>
            </div>
          </fieldset>
          <button type="submit" class="execute-button">make bzImage</button>
        </form>
        <div class="status-board" id="status-board" aria-live="polite">Awaiting config for make menuconfig…</div>
        <div class="compile-visual" aria-hidden="true">
          <div class="compile-dial" data-step="network">
            <span class="dial-label">Routing stack</span>
            <span class="dial-meter"></span>
          </div>
          <div class="compile-dial" data-step="drivers">
            <span class="dial-label">Driver matrix</span>
            <span class="dial-meter"></span>
          </div>
          <div class="compile-dial" data-step="trim">
            <span class="dial-label">Image trim</span>
            <span class="dial-meter"></span>
          </div>
          <div class="compile-progress" data-state="idle">
            <span class="progress-label">bzImage</span>
            <svg viewBox="0 0 120 120" role="presentation" focusable="false">
              <circle class="progress-track" cx="60" cy="60" r="52"></circle>
              <circle class="progress-fill" cx="60" cy="60" r="52"></circle>
            </svg>
          </div>
          <div class="compile-ticker" aria-hidden="true">
            <span class="ticker-label">Build feed</span>
            <div class="ticker-steps">
              <span class="ticker-step" data-ticker="network">Routing stack cold</span>
              <span class="ticker-step" data-ticker="drivers">Drivers queued</span>
              <span class="ticker-step" data-ticker="trim">Image trim pending</span>
            </div>
          </div>
        </div>
      </section>
    </main>
    <footer>Remember to copy System.map once it boots.</footer>
    <script src="../widgets.js" type="module"></script>
    <script type="module" src="./kernel-forge-20.js"></script>
  </body>
</html>
