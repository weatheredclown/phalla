<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Augmentum</title>
    <link rel="stylesheet" href="../secret-annex-snes.css" />
    <link rel="stylesheet" href="augmentum.css" />
  </head>
  <body class="secret-annex-snes">
    <header class="page-header">
      <a class="back-link" href="../1989/index.html">◀ Back to 1989 Arcade</a>
      <h1>Augmentum</h1>
      <p class="subtitle">
        Channel elemental currents, ignite infused rock states, and weave radiant bridges across the
        Augmentum lattice.
      </p>
    </header>

    <main class="game-layout">
      <section class="panel match-three" aria-label="Elemental Rock Crucible">
        <div class="panel-header">
          <h2>Rock Crucible</h2>
          <button type="button" class="action-button" id="charge-transform">Channel Flow</button>
        </div>
        <p class="panel-help">
          Swap adjacent rocks to make trios. Completed circuits infuse rocks with volcanic, geolocked,
          flux, or prismatic states that reshape match outcomes and resource surges.
        </p>
        <div class="match-board" id="match-board" role="grid" aria-live="polite"></div>
        <div class="state-legend">
          <span class="legend-label">Infusions:</span>
          <span class="legend-item volcanic">Volcanic</span>
          <span class="legend-item geolocked">Geolocked</span>
          <span class="legend-item flux">Flux</span>
          <span class="legend-item prismatic">Prismatic</span>
        </div>
        <div class="transform-toolbar" id="transform-toolbar" hidden>
          <p>Select a tile to transmute using stored flow energy.</p>
          <button type="button" class="action-button" id="cancel-transform">Cancel</button>
        </div>
      </section>

      <section class="panel tetramino" aria-label="Tetramino Reactor">
        <div class="panel-header">
          <h2>Tetramino Reactor</h2>
          <div class="panel-actions">
            <button type="button" class="action-button" id="toggle-isometric">
              Isometric View
            </button>
            <button type="button" class="action-button" id="shift-board" disabled>
              Actuated Shift
            </button>
          </div>
        </div>
        <p class="panel-help">
          Falling tetramino shards forge bridge schematics. Clear lines to draft shaped spans that can
          be anchored into the trail grid.
        </p>
        <div class="reactor-hud" aria-live="polite">
          <div class="reactor-hud-metrics">
            <div class="reactor-metric" id="score-metric">
              <span class="reactor-metric-label">Score</span>
              <span class="reactor-metric-value" id="score-display">0</span>
            </div>
            <div class="reactor-metric" id="lines-metric">
              <span class="reactor-metric-label">Lines</span>
              <span class="reactor-metric-value" id="lines-display">0</span>
            </div>
            <div class="reactor-metric" id="combo-metric">
              <span class="reactor-metric-label">Combo</span>
              <span class="reactor-metric-value" id="combo-display">—</span>
              <span class="reactor-combo-multiplier" id="combo-multiplier">x1.0</span>
            </div>
            <div class="reactor-metric" id="circuits-metric">
              <span class="reactor-metric-label">Circuits</span>
              <span class="reactor-metric-value" id="circuits-display">0</span>
            </div>
          </div>
          <div
            class="reactor-integrity"
            id="integrity-metric"
            role="group"
            aria-label="Reactor integrity"
          >
            <span class="reactor-metric-label">Integrity</span>
            <div
              class="integrity-bar"
              role="progressbar"
              aria-valuemin="0"
              aria-valuemax="100"
              aria-valuenow="100"
            >
              <div class="integrity-fill" id="integrity-fill"></div>
            </div>
            <span class="integrity-value" id="integrity-value">100%</span>
          </div>
          <div class="reactor-hud-controls">
            <button type="button" class="action-button restart-button" id="restart-game" disabled>
              Restart Run
            </button>
          </div>
        </div>
        <p class="reactor-alert" id="reactor-alert" role="status" aria-live="assertive"></p>
        <div class="tetramino-wrapper">
          <div class="isometric-stage" id="isometric-stage" hidden>
            <div class="isometric-board" id="tetramino-isometric" aria-hidden="true"></div>
            <p class="pixel-instructions" id="pixel-instructions">
              Guide the falling pixel with ← →, press ↓ to nudge, and space to fast-drop.
            </p>
          </div>
          <div class="tetramino-board" id="tetramino-board" aria-label="Falling pieces"></div>
          <div class="queue-panel">
            <h3>Forge Queue</h3>
            <div id="piece-queue"></div>
            <div class="meter-group">
              <h3>Resource Meters</h3>
              <label>Earth <progress id="earth-meter" max="100" value="0"></progress></label>
              <label>Water <progress id="water-meter" max="100" value="0"></progress></label>
              <label>Fire <progress id="fire-meter" max="100" value="0"></progress></label>
              <label>Shift <progress id="shift-meter" max="100" value="0"></progress></label>
            </div>
          </div>
        </div>
      </section>

      <section class="panel flow-network" aria-label="Flow Trail Network">
        <div class="panel-header">
          <div class="panel-title">
            <h2>Flow Trails</h2>
            <p class="panel-help">
              Lock schematics between wells and conduits to keep energy flowing. Select glowing spans and
              stabilize the flow to reclaim reactor integrity between surges.
            </p>
          </div>
          <div class="panel-actions">
            <button type="button" class="action-button" id="route-toggle">Plan Routes</button>
            <button type="button" class="action-button" id="stabilize-flow" disabled>Stabilize Flow</button>
          </div>
        </div>
        <div class="flow-grid" id="flow-grid" aria-label="Resource network"></div>
        <div class="bridge-inventory">
          <h3>Bridge Schematics</h3>
          <div id="bridge-inventory" aria-live="polite"></div>
          <p id="bridge-hint" class="inventory-hint"></p>
        </div>
        <div class="event-log" id="event-log" aria-live="polite"></div>
      </section>
    </main>

    <footer class="page-footer">
      <p>
        Tip: Forge a triple of matching rocks to spawn a tetramino. Clear a tetramino line to drop a
        bridge segment and flood the network with resources.
      </p>
    </footer>

    <script type="module" src="augmentum.js"></script>
  </body>
</html>
