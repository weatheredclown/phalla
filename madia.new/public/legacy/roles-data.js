// This file is auto-generated by scripts/build-legacy-game-data.mjs.
// Run "node scripts/build-legacy-game-data.mjs" after updating docs/db_exports.

export const ACTION_TYPE_DEFINITIONS = [
  {
    "id": 1,
    "legacyActionTypeId": 1,
    "name": "vote",
    "label": "Vote",
    "normalized": "vote"
  },
  {
    "id": 2,
    "legacyActionTypeId": 2,
    "name": "mafiavote",
    "label": "Mafia Vote",
    "normalized": "mafiavote"
  },
  {
    "id": 3,
    "legacyActionTypeId": 3,
    "name": "seer",
    "label": "Seer",
    "normalized": "seer"
  },
  {
    "id": 4,
    "legacyActionTypeId": 4,
    "name": "guardian",
    "label": "Guardian",
    "normalized": "guardian"
  },
  {
    "id": 11,
    "legacyActionTypeId": 11,
    "name": "execute",
    "label": "Execute",
    "normalized": "execute"
  },
  {
    "id": 12,
    "legacyActionTypeId": 12,
    "name": "masonpost",
    "label": "Mason Post",
    "normalized": "masonpost"
  },
  {
    "id": 13,
    "legacyActionTypeId": 13,
    "name": "track",
    "label": "Track",
    "normalized": "track"
  },
  {
    "id": 14,
    "legacyActionTypeId": 14,
    "name": "claim",
    "label": "Claim",
    "normalized": "claim"
  },
  {
    "id": 15,
    "legacyActionTypeId": 15,
    "name": "block",
    "label": "Block",
    "normalized": "block"
  },
  {
    "id": 16,
    "legacyActionTypeId": 16,
    "name": "trust",
    "label": "Trust",
    "normalized": "trust"
  },
  {
    "id": 17,
    "legacyActionTypeId": 17,
    "name": "notebook",
    "label": "Notebook",
    "normalized": "notebook"
  }
];

export const ROLE_DEFINITIONS = [
  {
    "id": "godfather",
    "legacyId": 17,
    "name": "Godfather",
    "alignment": "Hostile",
    "summary": "Legacy Godfather imported from the Access database.",
    "winCondition": "Overwhelm the village and secure control of the vote.",
    "tags": [
      "legacy",
      "hostile"
    ],
    "rules": {
      "legacyRoleId": 17,
      "privateActions": [
        {
          "id": "legacy-rule-145",
          "legacyRuleId": 145,
          "legacyActionTypeId": 2,
          "actionType": "mafiavote",
          "actionTypeId": 2,
          "actionName": "Mafia Vote",
          "name": "Mafia Vote",
          "description": "Record a Mafia Vote action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "createsPrivateChannel": true,
          "notes": "Creates a private discussion channel for eligible members.",
          "tags": [
            "legacy"
          ]
        }
      ],
      "actionRules": [
        {
          "id": "legacy-rule-144",
          "legacyRuleId": 144,
          "legacyActionTypeId": 14,
          "actionType": "claim",
          "actionTypeId": 14,
          "actionName": "Claim",
          "name": "Claim",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-145",
          "legacyRuleId": 145,
          "legacyActionTypeId": 2,
          "actionType": "mafiavote",
          "actionTypeId": 2,
          "actionName": "Mafia Vote",
          "name": "Mafia Vote",
          "description": "Record a Mafia Vote action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "createsPrivateChannel": true,
          "notes": "Creates a private discussion channel for eligible members.",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-143",
          "legacyRuleId": 143,
          "legacyActionTypeId": 1,
          "actionType": "vote",
          "actionTypeId": 1,
          "actionName": "Vote",
          "name": "Vote",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "notes": "Generated from docs/db_exports CSV exports."
    }
  },
  {
    "id": "guardian",
    "legacyId": 4,
    "name": "Guardian",
    "alignment": "Village",
    "summary": "Legacy Guardian imported from the Access database.",
    "winCondition": "Eliminate all hostile factions from the game.",
    "tags": [
      "legacy",
      "village"
    ],
    "rules": {
      "legacyRoleId": 4,
      "privateActions": [
        {
          "id": "legacy-rule-4",
          "legacyRuleId": 4,
          "legacyActionTypeId": 4,
          "actionType": "guardian",
          "actionTypeId": 4,
          "actionName": "Guardian",
          "name": "Guardian",
          "description": "Record a Guardian action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "actionRules": [
        {
          "id": "legacy-rule-131",
          "legacyRuleId": 131,
          "legacyActionTypeId": 14,
          "actionType": "claim",
          "actionTypeId": 14,
          "actionName": "Claim",
          "name": "Claim",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-4",
          "legacyRuleId": 4,
          "legacyActionTypeId": 4,
          "actionType": "guardian",
          "actionTypeId": 4,
          "actionName": "Guardian",
          "name": "Guardian",
          "description": "Record a Guardian action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-7",
          "legacyRuleId": 7,
          "legacyActionTypeId": 1,
          "actionType": "vote",
          "actionTypeId": 1,
          "actionName": "Vote",
          "name": "Vote",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "notes": "Generated from docs/db_exports CSV exports."
    }
  },
  {
    "id": "mafia",
    "legacyId": 2,
    "name": "Mafia",
    "alignment": "Hostile",
    "summary": "Legacy Mafia imported from the Access database.",
    "winCondition": "Overwhelm the village and secure control of the vote.",
    "tags": [
      "legacy",
      "hostile"
    ],
    "rules": {
      "legacyRoleId": 2,
      "privateActions": [
        {
          "id": "legacy-rule-2",
          "legacyRuleId": 2,
          "legacyActionTypeId": 2,
          "actionType": "mafiavote",
          "actionTypeId": 2,
          "actionName": "Mafia Vote",
          "name": "Mafia Vote",
          "description": "Record a Mafia Vote action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "createsPrivateChannel": true,
          "notes": "Creates a private discussion channel for eligible members.",
          "tags": [
            "legacy"
          ]
        }
      ],
      "actionRules": [
        {
          "id": "legacy-rule-129",
          "legacyRuleId": 129,
          "legacyActionTypeId": 14,
          "actionType": "claim",
          "actionTypeId": 14,
          "actionName": "Claim",
          "name": "Claim",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-2",
          "legacyRuleId": 2,
          "legacyActionTypeId": 2,
          "actionType": "mafiavote",
          "actionTypeId": 2,
          "actionName": "Mafia Vote",
          "name": "Mafia Vote",
          "description": "Record a Mafia Vote action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "createsPrivateChannel": true,
          "notes": "Creates a private discussion channel for eligible members.",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-5",
          "legacyRuleId": 5,
          "legacyActionTypeId": 1,
          "actionType": "vote",
          "actionTypeId": 1,
          "actionName": "Vote",
          "name": "Vote",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "notes": "Generated from docs/db_exports CSV exports."
    }
  },
  {
    "id": "mason",
    "legacyId": 13,
    "name": "Mason",
    "alignment": "Village",
    "summary": "Legacy Mason imported from the Access database.",
    "winCondition": "Eliminate all hostile factions from the game.",
    "tags": [
      "legacy",
      "village"
    ],
    "rules": {
      "legacyRoleId": 13,
      "privateActions": [
        {
          "id": "legacy-rule-126",
          "legacyRuleId": 126,
          "legacyActionTypeId": 12,
          "actionType": "masonpost",
          "actionTypeId": 12,
          "actionName": "Mason Post",
          "name": "Mason Post",
          "description": "Record a Mason Post action for moderator tracking.",
          "createsPrivateChannel": true,
          "notes": "Creates a private discussion channel for eligible members.",
          "tags": [
            "legacy"
          ]
        }
      ],
      "actionRules": [
        {
          "id": "legacy-rule-134",
          "legacyRuleId": 134,
          "legacyActionTypeId": 14,
          "actionType": "claim",
          "actionTypeId": 14,
          "actionName": "Claim",
          "name": "Claim",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-126",
          "legacyRuleId": 126,
          "legacyActionTypeId": 12,
          "actionType": "masonpost",
          "actionTypeId": 12,
          "actionName": "Mason Post",
          "name": "Mason Post",
          "description": "Record a Mason Post action for moderator tracking.",
          "createsPrivateChannel": true,
          "notes": "Creates a private discussion channel for eligible members.",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-125",
          "legacyRuleId": 125,
          "legacyActionTypeId": 1,
          "actionType": "vote",
          "actionTypeId": 1,
          "actionName": "Vote",
          "name": "Vote",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "notes": "Generated from docs/db_exports CSV exports."
    }
  },
  {
    "id": "observer",
    "legacyId": 5,
    "name": "Observer",
    "alignment": "Village",
    "summary": "Legacy Observer imported from the Access database.",
    "winCondition": "Eliminate all hostile factions from the game.",
    "tags": [
      "legacy",
      "village"
    ],
    "rules": {
      "legacyRoleId": 5,
      "actionRules": [
        {
          "id": "legacy-rule-132",
          "legacyRuleId": 132,
          "legacyActionTypeId": 14,
          "actionType": "claim",
          "actionTypeId": 14,
          "actionName": "Claim",
          "name": "Claim",
          "tags": [
            "legacy"
          ]
        }
      ],
      "notes": "Generated from docs/db_exports CSV exports."
    }
  },
  {
    "id": "one-shot-vigilante",
    "legacyId": 15,
    "name": "One-shot Vigilante",
    "alignment": "Village",
    "summary": "Legacy One-shot Vigilante imported from the Access database.",
    "winCondition": "Eliminate all hostile factions from the game.",
    "tags": [
      "legacy",
      "village"
    ],
    "rules": {
      "legacyRoleId": 15,
      "privateActions": [
        {
          "id": "legacy-rule-136",
          "legacyRuleId": 136,
          "legacyActionTypeId": 11,
          "actionType": "execute",
          "actionTypeId": 11,
          "actionName": "Execute",
          "name": "Execute",
          "description": "Record an Execute action for moderator tracking.",
          "timesPerGame": 1,
          "targeted": true,
          "target": "player",
          "notes": "Limited to 1 use per game.",
          "tags": [
            "legacy"
          ]
        }
      ],
      "actionRules": [
        {
          "id": "legacy-rule-137",
          "legacyRuleId": 137,
          "legacyActionTypeId": 14,
          "actionType": "claim",
          "actionTypeId": 14,
          "actionName": "Claim",
          "name": "Claim",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-136",
          "legacyRuleId": 136,
          "legacyActionTypeId": 11,
          "actionType": "execute",
          "actionTypeId": 11,
          "actionName": "Execute",
          "name": "Execute",
          "description": "Record an Execute action for moderator tracking.",
          "timesPerGame": 1,
          "targeted": true,
          "target": "player",
          "notes": "Limited to 1 use per game.",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-139",
          "legacyRuleId": 139,
          "legacyActionTypeId": 1,
          "actionType": "vote",
          "actionTypeId": 1,
          "actionName": "Vote",
          "name": "Vote",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "notes": "Generated from docs/db_exports CSV exports."
    }
  },
  {
    "id": "roleblocker",
    "legacyId": 16,
    "name": "Roleblocker",
    "alignment": "Village",
    "summary": "Legacy Roleblocker imported from the Access database.",
    "winCondition": "Eliminate all hostile factions from the game.",
    "tags": [
      "legacy",
      "village"
    ],
    "rules": {
      "legacyRoleId": 16,
      "privateActions": [
        {
          "id": "legacy-rule-140",
          "legacyRuleId": 140,
          "legacyActionTypeId": 15,
          "actionType": "block",
          "actionTypeId": 15,
          "actionName": "Block",
          "name": "Block",
          "description": "Record a Block action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "actionRules": [
        {
          "id": "legacy-rule-140",
          "legacyRuleId": 140,
          "legacyActionTypeId": 15,
          "actionType": "block",
          "actionTypeId": 15,
          "actionName": "Block",
          "name": "Block",
          "description": "Record a Block action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-142",
          "legacyRuleId": 142,
          "legacyActionTypeId": 14,
          "actionType": "claim",
          "actionTypeId": 14,
          "actionName": "Claim",
          "name": "Claim",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-141",
          "legacyRuleId": 141,
          "legacyActionTypeId": 1,
          "actionType": "vote",
          "actionTypeId": 1,
          "actionName": "Vote",
          "name": "Vote",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "notes": "Generated from docs/db_exports CSV exports."
    }
  },
  {
    "id": "seer",
    "legacyId": 3,
    "name": "Seer",
    "alignment": "Village",
    "summary": "Legacy Seer imported from the Access database.",
    "winCondition": "Eliminate all hostile factions from the game.",
    "tags": [
      "legacy",
      "village"
    ],
    "rules": {
      "legacyRoleId": 3,
      "privateActions": [
        {
          "id": "legacy-rule-3",
          "legacyRuleId": 3,
          "legacyActionTypeId": 3,
          "actionType": "seer",
          "actionTypeId": 3,
          "actionName": "Seer",
          "name": "Seer",
          "description": "Record a Seer action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-146",
          "legacyRuleId": 146,
          "legacyActionTypeId": 16,
          "actionType": "trust",
          "actionTypeId": 16,
          "actionName": "Trust",
          "name": "Trust",
          "description": "Record a Trust action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "createsPrivateChannel": true,
          "notes": "Creates a private discussion channel for eligible members.",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-147",
          "legacyRuleId": 147,
          "legacyActionTypeId": 16,
          "actionType": "trust",
          "actionTypeId": 16,
          "actionName": "Trust",
          "name": "Trust",
          "description": "Record a Trust action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "actionRules": [
        {
          "id": "legacy-rule-130",
          "legacyRuleId": 130,
          "legacyActionTypeId": 14,
          "actionType": "claim",
          "actionTypeId": 14,
          "actionName": "Claim",
          "name": "Claim",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-3",
          "legacyRuleId": 3,
          "legacyActionTypeId": 3,
          "actionType": "seer",
          "actionTypeId": 3,
          "actionName": "Seer",
          "name": "Seer",
          "description": "Record a Seer action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-146",
          "legacyRuleId": 146,
          "legacyActionTypeId": 16,
          "actionType": "trust",
          "actionTypeId": 16,
          "actionName": "Trust",
          "name": "Trust",
          "description": "Record a Trust action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "createsPrivateChannel": true,
          "notes": "Creates a private discussion channel for eligible members.",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-147",
          "legacyRuleId": 147,
          "legacyActionTypeId": 16,
          "actionType": "trust",
          "actionTypeId": 16,
          "actionName": "Trust",
          "name": "Trust",
          "description": "Record a Trust action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-6",
          "legacyRuleId": 6,
          "legacyActionTypeId": 1,
          "actionType": "vote",
          "actionTypeId": 1,
          "actionName": "Vote",
          "name": "Vote",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "notes": "Generated from docs/db_exports CSV exports."
    }
  },
  {
    "id": "tracker",
    "legacyId": 14,
    "name": "Tracker",
    "alignment": "Village",
    "summary": "Legacy Tracker imported from the Access database.",
    "winCondition": "Eliminate all hostile factions from the game.",
    "tags": [
      "legacy",
      "village"
    ],
    "rules": {
      "legacyRoleId": 14,
      "privateActions": [
        {
          "id": "legacy-rule-127",
          "legacyRuleId": 127,
          "legacyActionTypeId": 13,
          "actionType": "track",
          "actionTypeId": 13,
          "actionName": "Track",
          "name": "Track",
          "description": "Record a Track action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "actionRules": [
        {
          "id": "legacy-rule-135",
          "legacyRuleId": 135,
          "legacyActionTypeId": 14,
          "actionType": "claim",
          "actionTypeId": 14,
          "actionName": "Claim",
          "name": "Claim",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-127",
          "legacyRuleId": 127,
          "legacyActionTypeId": 13,
          "actionType": "track",
          "actionTypeId": 13,
          "actionName": "Track",
          "name": "Track",
          "description": "Record a Track action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-138",
          "legacyRuleId": 138,
          "legacyActionTypeId": 1,
          "actionType": "vote",
          "actionTypeId": 1,
          "actionName": "Vote",
          "name": "Vote",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "notes": "Generated from docs/db_exports CSV exports."
    }
  },
  {
    "id": "vigilante",
    "legacyId": 12,
    "name": "Vigilante",
    "alignment": "Village",
    "summary": "Legacy Vigilante imported from the Access database.",
    "winCondition": "Eliminate all hostile factions from the game.",
    "tags": [
      "legacy",
      "village"
    ],
    "rules": {
      "legacyRoleId": 12,
      "privateActions": [
        {
          "id": "legacy-rule-122",
          "legacyRuleId": 122,
          "legacyActionTypeId": 11,
          "actionType": "execute",
          "actionTypeId": 11,
          "actionName": "Execute",
          "name": "Execute",
          "description": "Record an Execute action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "actionRules": [
        {
          "id": "legacy-rule-133",
          "legacyRuleId": 133,
          "legacyActionTypeId": 14,
          "actionType": "claim",
          "actionTypeId": 14,
          "actionName": "Claim",
          "name": "Claim",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-122",
          "legacyRuleId": 122,
          "legacyActionTypeId": 11,
          "actionType": "execute",
          "actionTypeId": 11,
          "actionName": "Execute",
          "name": "Execute",
          "description": "Record an Execute action for moderator tracking.",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-124",
          "legacyRuleId": 124,
          "legacyActionTypeId": 1,
          "actionType": "vote",
          "actionTypeId": 1,
          "actionName": "Vote",
          "name": "Vote",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "notes": "Generated from docs/db_exports CSV exports."
    }
  },
  {
    "id": "villager",
    "legacyId": 1,
    "name": "Villager",
    "alignment": "Village",
    "summary": "Legacy Villager imported from the Access database.",
    "winCondition": "Eliminate all hostile factions from the game.",
    "tags": [
      "legacy",
      "village"
    ],
    "rules": {
      "legacyRoleId": 1,
      "actionRules": [
        {
          "id": "legacy-rule-128",
          "legacyRuleId": 128,
          "legacyActionTypeId": 14,
          "actionType": "claim",
          "actionTypeId": 14,
          "actionName": "Claim",
          "name": "Claim",
          "tags": [
            "legacy"
          ]
        },
        {
          "id": "legacy-rule-1",
          "legacyRuleId": 1,
          "legacyActionTypeId": 1,
          "actionType": "vote",
          "actionTypeId": 1,
          "actionName": "Vote",
          "name": "Vote",
          "targeted": true,
          "target": "player",
          "tags": [
            "legacy"
          ]
        }
      ],
      "notes": "Generated from docs/db_exports CSV exports."
    }
  }
];

export const ROLE_NAMES = ROLE_DEFINITIONS.map((role) => role.name);

export function normalizeRoleName(name) {
  if (typeof name !== "string") {
    return "";
  }
  return name.trim().toLowerCase();
}

export function normalizeActionTypeName(name) {
  if (typeof name !== "string") {
    return "";
  }
  return name.trim().toLowerCase();
}

const CANONICAL_ROLE_MAP = new Map();
ROLE_DEFINITIONS.forEach((role) => {
  const normalized = normalizeRoleName(role.name);
  if (normalized) {
    CANONICAL_ROLE_MAP.set(normalized, role);
  }
  (role.aliases || []).forEach((alias) => {
    const normalizedAlias = normalizeRoleName(alias);
    if (normalizedAlias) {
      CANONICAL_ROLE_MAP.set(normalizedAlias, role);
    }
  });
});

const ACTION_TYPE_BY_ID = new Map();
const ACTION_TYPE_BY_NAME = new Map();
ACTION_TYPE_DEFINITIONS.forEach((type) => {
  if (typeof type.legacyActionTypeId === "number") {
    ACTION_TYPE_BY_ID.set(type.legacyActionTypeId, type);
  }
  const normalizedName = normalizeActionTypeName(type.name);
  if (normalizedName) {
    ACTION_TYPE_BY_NAME.set(normalizedName, type);
  }
  const normalizedLabel = normalizeActionTypeName(type.label);
  if (normalizedLabel) {
    ACTION_TYPE_BY_NAME.set(normalizedLabel, type);
  }
});

export function getCanonicalRoleDefinition(name) {
  const normalized = normalizeRoleName(name);
  if (!normalized) {
    return null;
  }
  return CANONICAL_ROLE_MAP.get(normalized) || null;
}

export function getActionTypeDefinition(identifier) {
  if (identifier === null || identifier === undefined) {
    return null;
  }
  if (typeof identifier === "number") {
    return ACTION_TYPE_BY_ID.get(identifier) || null;
  }
  const normalized = normalizeActionTypeName(identifier);
  if (!normalized) {
    return null;
  }
  return ACTION_TYPE_BY_NAME.get(normalized) || null;
}

